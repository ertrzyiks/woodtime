(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{210:function(e,n,t){},251:function(e,n,t){"use strict";t.r(n);var i=t(0),a=t.n(i),c=t(19),r=t.n(c),d=(t(210),t(139)),l=t.n(d),o=t(167),s=t(12),u=t(180),m=t(295),j=t(297),b=t(318),k=t(319),p=t(320),v=t(321),h=t(56),O=t(316),f=t(322),x=t(83),g=t.n(x),N=t(71),y=t.n(N),S=t(26),C=t(23),A=t(182),w=t(252),F=t(136),I=t(38),D=t(250),V=t(41),E=t(300),T=t(301),_=t(331),P=t(328),L=t(299),R=t(262),W=t(306),B=t(82),z=t.n(B),Q=t(120),q=t.n(Q),U=t(175),G=t.n(U),H=t(181),K=t(303),J=t(334),M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEvents"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"events"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"checkpoint_count"}},{kind:"Field",name:{kind:"Name",value:"created_at"}}]}}]}}]},Y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},X=t(327),Z=t(298),$=t(2),ee=Object(m.a)((function(e){return Object(j.a)({listWrapper:{padding:10}})})),ne=function(e){var n=ee();return Object($.jsxs)(X.a,{"aria-labelledby":"simple-checklist-title",open:!0,onClose:e.handleClose,children:[Object($.jsx)(Z.a,{id:"simple-checklist-title",children:"Rzeczy do zabrania"}),Object($.jsx)(L.a,{className:n.listWrapper,children:["4 kanapki","dwa bidony wody","kubek Kuby","jab\u0142ko w kawa\u0142kach","banan","ciastka","pampersy","chusteczki mokre","worek na \u015bmieci","chusteczki zwyk\u0142e","p\u0119seta","octenisept","\u017cel do dezynfekcji"].map((function(e,n){return Object($.jsx)(E.a,{dense:!0,children:Object($.jsx)(T.a,{primary:e,primaryTypographyProps:{variant:"body1"}})},n)}))})]})},te=a.a.createContext(!1),ie=function(e){var n=e.children,t=Object(i.useState)(null),a=Object(s.a)(t,2),c=a[0],r=a[1],d=Object(i.useState)(!0),l=Object(s.a)(d,2),o=l[0],u=l[1],m=Object(S.g)();return Object(i.useEffect)((function(){c?c!==m.pathname&&u(!1):r(m.pathname)}),[c,m.pathname,o,u]),Object($.jsx)(te.Provider,{value:(!c||c===m.pathname)&&o,children:n})};function ae(){return Object(i.useContext)(te)}var ce=Object(m.a)((function(e){return Object(j.a)({link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:20,height:20}})})),re=t(302),de=Object(m.a)((function(e){return Object(j.a)({root:{height:4}})})),le=function(e){var n=e.active,t=de();return Object($.jsx)("div",{className:t.root,children:n&&Object($.jsx)(re.a,{color:"secondary"})})},oe=function(e){var n=e.id,t=e.name,i=e.createdAt;return Object($.jsx)(E.a,{button:!0,component:C.b,to:"/events/".concat(n),children:Object($.jsx)(T.a,{primary:t,secondary:Object(H.a)(new Date(i),"dd/MM/yyyy")})})},se=Object(m.a)((function(e){return Object(j.a)({wrapper:{display:"flex",width:"100%"},deleteIcon:{},icons:{display:"flex",justifyContent:"space-between"},listWrapper:{},addEventButton:{position:"absolute",right:"1em",bottom:"5em"}})})),ue=function(){var e,n=ae(),t=Object(K.a)(M,{fetchPolicy:n?"cache-and-network":void 0,nextFetchPolicy:n?"cache-first":void 0}),a=t.loading,c=t.error,r=t.data,d=Object(i.useState)(!1),l=Object(s.a)(d,2),o=l[0],u=l[1],m=Object(J.a)(Y,{refetchQueries:["getEvents"],awaitRefetchQueries:!0}),j=Object(s.a)(m,1)[0],b=se(),k=ce();return a&&!r?Object($.jsx)("p",{children:"Loading..."}):c?Object($.jsx)("p",{children:"Error :("}):Object($.jsxs)("div",{className:b.listWrapper,children:[Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsx)(P.a,{"aria-label":"breadcrumb",children:Object($.jsxs)(h.a,{color:"textPrimary",className:k.link,children:[Object($.jsx)(y.a,{className:k.icon}),"Events"]})})}),Object($.jsx)(le,{active:a}),c&&Object($.jsx)("p",{children:"Error :("}),Object($.jsx)(L.a,{children:Object(V.a)(null!==(e=null===r||void 0===r?void 0:r.events)&&void 0!==e?e:[]).sort((function(e,n){return n.id-e.id})).map((function(e){var n=e.id,t=e.name,i=e.created_at;return Object($.jsxs)("div",{className:b.wrapper,children:[Object($.jsx)(oe,{id:n,name:t,createdAt:i}),Object($.jsxs)("div",{className:b.icons,children:[Object($.jsx)(R.a,{"aria-label":"checklist",onClick:function(){u(!0)},children:Object($.jsx)(G.a,{})}),Object($.jsx)(R.a,{"aria-label":"delete",onClick:function(){return j({variables:{id:n}})},children:Object($.jsx)(q.a,{})})]})]},n)}))}),o&&Object($.jsx)(ne,{handleClose:function(){u(!1)}}),Object($.jsx)(W.a,{className:b.addEventButton,color:"primary","aria-label":"add",component:C.b,to:"/events/new",children:Object($.jsx)(z.a,{})})]})},me=t(307),je=t(323),be=t(308),ke=t(309),pe=t(332),ve=t(311),he=t(325),Oe=t(312),fe=t(313),xe=t(43),ge={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"checkpointCount"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"checkpointCount"},value:{kind:"Variable",name:{kind:"Name",value:"checkpointCount"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"event"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"checkpoint_count"}},{kind:"Field",name:{kind:"Name",value:"created_at"}},{kind:"Field",name:{kind:"Name",value:"updated_at"}}]}}]}}]}}]},Ne=Object(m.a)((function(e){return Object(j.a)({radioGroupWrapper:{paddingTop:25,paddingBottom:10},title:{paddingBottom:0},radioLabel:{fontSize:"0.6rem"}})})),ye=function(){var e=Object(i.useState)(""),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(i.useState)(""),r=Object(s.a)(c,2),d=r[0],l=r[1],o=Object(i.useState)("score"),u=Object(s.a)(o,2),m=u[0],j=u[1],b=Object(S.f)(),k=Object(J.a)(ge,{refetchQueries:[{query:M}],awaitRefetchQueries:!0,onCompleted:function(e){var n;(null===(n=e.createEvent)||void 0===n?void 0:n.event)&&b.push("/events/".concat(e.createEvent.event.id))}}),p=Object(s.a)(k,1)[0],v=Ne(),O=function(){b.push("/")};return Object($.jsxs)(X.a,{open:!0,keepMounted:!0,onClose:O,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object($.jsx)(Z.a,{id:"alert-dialog-slide-title",className:v.title,children:"Create a new event"}),Object($.jsx)(xe.b,{onSubmit:function(){var e="score"===m?1:2;return p({variables:{name:t,checkpointCount:parseInt(d,10),type:e}})},render:function(e){var n=e.handleSubmit;return Object($.jsxs)("form",{onSubmit:n,children:[Object($.jsxs)(me.a,{children:[Object($.jsx)(xe.a,{name:"name",render:function(e){e.input;var n=e.meta;return Object($.jsxs)("div",{children:[Object($.jsx)(je.a,{id:"standard-basic",label:"Name",required:!0,autoComplete:"off",onChange:function(e){return a(e.target.value)}}),n.touched&&n.error&&Object($.jsx)("span",{children:n.error})]})}}),Object($.jsx)(xe.a,{name:"points",render:function(e){e.input;var n=e.meta;return Object($.jsxs)("div",{children:[Object($.jsx)(je.a,{id:"standard-basic",label:"Points",required:!0,autoComplete:"off",onChange:function(e){return l(e.target.value)}}),n.touched&&n.error&&Object($.jsx)("span",{children:n.error})]})}}),Object($.jsx)(xe.a,{name:"type",render:function(){return Object($.jsx)("div",{className:v.radioGroupWrapper,children:Object($.jsxs)(be.a,{component:"fieldset",children:[Object($.jsx)(ke.a,{component:"legend",children:"Type"}),Object($.jsxs)(pe.a,{"aria-label":"type",name:"type",value:m,onChange:function(e){return j(e.target.value)},children:[Object($.jsx)(ve.a,{value:"score",control:Object($.jsx)(he.a,{size:"small"}),label:Object($.jsx)(h.a,{variant:"body2",children:"Scorelauf"})}),Object($.jsx)(ve.a,{value:"classic",control:Object($.jsx)(he.a,{size:"small"}),label:Object($.jsx)(h.a,{variant:"body2",children:"Classic"})})]})]})})}})]}),Object($.jsxs)(Oe.a,{children:[Object($.jsx)(fe.a,{variant:"contained",color:"primary",type:"submit",children:"Create"}),Object($.jsx)(fe.a,{onClick:O,color:"primary",children:"Cancel"})]})]})}})]})},Se=t(22),Ce=t(177),Ae=t(314),we=t(256),Fe=t(183),Ie=["current","max"];var De=function(e){var n=e.current,t=e.max,i=Object(Fe.a)(e,Ie),a=100*n/t;return Object($.jsxs)(_.a,{display:"flex",alignItems:"center",children:[Object($.jsx)(_.a,{width:"100%",mr:1,children:Object($.jsx)(re.a,Object(Se.a)(Object(Se.a)({variant:"determinate"},i),{},{value:a}))}),Object($.jsx)(_.a,{minWidth:35,children:Object($.jsxs)(h.a,{variant:"body2",color:"textSecondary",children:[n,"/",t]})})]})},Ve=function(e){var n=e.scoredIds,t=e.max,i=Array(t).fill(t).map((function(e,n){return 1+n})).filter((function(e){return!n.includes(e)}));return 0===n.length||n.length===t?null:Object($.jsxs)(_.a,{mt:3,children:[Object($.jsx)(_.a,{minWidth:35,ml:1,mb:1,children:Object($.jsx)(h.a,{children:"Missing:"})}),Object($.jsx)(_.a,{display:"flex",alignItems:"center",children:Object($.jsx)(_.a,{width:"100%",ml:1,children:i.join(", ")})})]})},Ee=Object(m.a)((function(e){return Object(j.a)({wrapper:{width:"100%"},header:{padding:10,paddingBottom:2,backgroundColor:"#c5cae9"},content:{border:"1px solid #c5cae9",width:"100%",paddingLeft:10,paddingRight:10,paddingBottom:10,padding:10,boxSizing:"border-box"},deleteIcon:{position:"absolute",top:-3,right:-5}})})),Te=function(e){var n,t=e.checkpoint,i=e.onDelete,a=Ee();return Object($.jsxs)("div",{style:{display:"flex",flexDirection:"row",position:"relative"},children:[Object($.jsxs)("div",{className:a.wrapper,children:[Object($.jsx)("div",{className:a.header,children:Object($.jsx)(h.a,{variant:"button",color:"textSecondary",children:t.cp_id})}),Object($.jsx)("div",{className:a.content,children:Object($.jsx)(h.a,{variant:"subtitle1",children:Object($.jsx)("span",{children:t.skipped?"skipped":null===(n=t.cp_code)||void 0===n?void 0:n.toUpperCase()})})})]}),Object($.jsx)("div",{className:a.deleteIcon,children:Object($.jsx)(R.a,{"aria-label":"delete",onClick:function(){return i(t)},children:Object($.jsx)(q.a,{})})})]})},_e=function(e){var n=e.checkpoints,t=e.max,i=Array(t).fill(t).map((function(e,n){return 1+n})).map((function(e){var t=n.find((function(n){return n.cp_id===e}));return!t||t.skipped?"...":t.cp_code}));return Object($.jsxs)(_.a,{mt:3,children:[Object($.jsx)(_.a,{minWidth:35,ml:1,mb:1,children:Object($.jsx)(h.a,{variant:"h6",children:"Solution:"})}),Object($.jsx)(_.a,{display:"flex",alignItems:"center",children:Object($.jsx)(_.a,{width:"100%",ml:1,children:i.join(" ")})})]})},Pe=a.a.createContext({queue:[],errored:[]}),Le=a.a.createContext((function(){})),Re=function(e,n){switch(n.type){case"add":return Object(Se.a)(Object(Se.a)({},e),{},{queue:[].concat(Object(V.a)(e.queue),[{checkpoint:n.checkpoint,eventId:n.eventId}])});case"delete":return Object(Se.a)(Object(Se.a)({},e),{},{queue:e.queue.filter((function(e){return e.eventId!==n.eventId||e.checkpoint.cpId!==n.id})),errored:e.errored.filter((function(e){return e.eventId!==n.eventId||e.checkpoint.cpId!==n.id}))});case"errored":return Object(Se.a)(Object(Se.a)({},e),{},{queue:e.queue.filter((function(e){return e.eventId!==n.eventId||e.checkpoint.cpId!==n.checkpoint.cpId})),errored:[].concat(Object(V.a)(e.errored),[{error:n.error,eventId:n.eventId,checkpoint:Object(Se.a)({},n.checkpoint)}])})}return e},We=function(e){var n=e.children,t=Object(i.useReducer)(Re,{queue:[],errored:[]},(function(e){var n=localStorage.getItem("checkpointsServiceStorage");if(!n)return e;try{var t=JSON.parse(n);return{queue:[].concat(Object(V.a)(t.queue),Object(V.a)(t.errored)),errored:[]}}catch(i){return e}})),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(i.useEffect)((function(){localStorage.setItem("checkpointsServiceStorage",JSON.stringify(c))}),[c]),Object($.jsx)(Le.Provider,{value:r,children:Object($.jsx)(Pe.Provider,{value:c,children:n})})},Be={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteCheckpoint"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteCheckpoint"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},ze=t(176),Qe=t.n(ze),qe=function(e){e.list;var n=e.eventId,t=e.inviteToken,i="".concat(window.location.protocol,"//").concat(window.location.host,"/join/").concat(n,"?token=").concat(t);return t?Object($.jsxs)("div",{children:["Copy invitation link:",Object($.jsx)(R.a,{"aria-label":"add",onClick:function(){try{window.navigator.clipboard.writeText(i)}catch(e){}},children:Object($.jsx)(Qe.a,{})})]}):null},Ue=Object(m.a)((function(e){return Object(j.a)({root:{flexGrow:1,padding:20},paper:{width:80},item:{padding:5},pendingItem:{opacity:.7},control:{padding:e.spacing(2)},addCheckpointButton:{position:"absolute",right:"1em",bottom:"1em"}})})),Ge=function(e){var n=e.event,t=e.newCheckpointPath,c=n.checkpoints,r=a.a.useState(2),d=Object(s.a)(r,1)[0],l=Ue(),o=Object(i.useContext)(Le),u=Object(J.a)(Be,{refetchQueries:["getEvent"],awaitRefetchQueries:!0}),m=Object(s.a)(u,1)[0],j=function(e){return e.pending?o({type:"delete",eventId:n.id,id:e.cp_id}):m({variables:{id:e.id}})};return Object($.jsxs)(_.a,{m:1,children:[Object($.jsx)(h.a,{variant:"h6",children:n.name}),Object($.jsx)(qe,{list:[],eventId:n.id,inviteToken:n.invite_token}),Object($.jsx)(De,{current:c.length,max:n.checkpoint_count}),c.length>0&&Object($.jsx)(Ae.a,{container:!0,className:l.root,spacing:2,children:Object($.jsx)(Ae.a,{item:!0,xs:12,children:Object($.jsx)(Ae.a,{container:!0,justify:"flex-start",spacing:d,children:c.map((function(e){return Object($.jsx)(Ae.a,{item:!0,className:[l.item].concat(e.pending?[l.pendingItem]:[]).join(" "),children:Object($.jsx)(we.a,{className:l.paper,children:Object($.jsx)(Te,{checkpoint:e,eventId:n.id,onDelete:j})})},e.cp_id)}))})})}),Object($.jsx)(W.a,{className:l.addCheckpointButton,color:"primary","aria-label":"add",component:C.b,to:t,children:Object($.jsx)(z.a,{})}),Object($.jsx)(Ve,{scoredIds:c.map((function(e){return e.cp_id})),max:n.checkpoint_count}),Object($.jsx)(_e,{checkpoints:c,max:n.checkpoint_count})]})},He=function(e){var n=e.event,t=(e.virtualChallenge,e.newCheckpointPath,n.checkpoints);return Object($.jsx)("div",{children:Object($.jsx)(De,{current:t.length,max:n.checkpoint_count})})},Ke={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"event"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"invite_token"}},{kind:"Field",name:{kind:"Name",value:"checkpoint_count"}},{kind:"Field",name:{kind:"Name",value:"virtual_challenge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"checkpoints"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"cp_id"}},{kind:"Field",name:{kind:"Name",value:"cp_code"}},{kind:"Field",name:{kind:"Name",value:"event_id"}},{kind:"Field",name:{kind:"Name",value:"skipped"}},{kind:"Field",name:{kind:"Name",value:"skip_reason"}}]}}]}}]}}]},Je=t(315),Me=t(326),Ye={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateCheckpoint"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"eventId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cpId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cpCode"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skipped"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"skipReason"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createCheckpoint"},arguments:[{kind:"Argument",name:{kind:"Name",value:"event_id"},value:{kind:"Variable",name:{kind:"Name",value:"eventId"}}},{kind:"Argument",name:{kind:"Name",value:"cp_id"},value:{kind:"Variable",name:{kind:"Name",value:"cpId"}}},{kind:"Argument",name:{kind:"Name",value:"cp_code"},value:{kind:"Variable",name:{kind:"Name",value:"cpCode"}}},{kind:"Argument",name:{kind:"Name",value:"skipped"},value:{kind:"Variable",name:{kind:"Name",value:"skipped"}}},{kind:"Argument",name:{kind:"Name",value:"skip_reason"},value:{kind:"Variable",name:{kind:"Name",value:"skipReason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkpoint"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"event_id"}},{kind:"Field",name:{kind:"Name",value:"cp_id"}},{kind:"Field",name:{kind:"Name",value:"cp_code"}},{kind:"Field",name:{kind:"Name",value:"skipped"}},{kind:"Field",name:{kind:"Name",value:"skip_reason"}},{kind:"Field",name:{kind:"Name",value:"created_at"}},{kind:"Field",name:{kind:"Name",value:"updated_at"}}]}}]}}]}}]},Xe=Object(m.a)((function(e){return Object(j.a)({skippedText:{fontStyle:"italic"}})})),Ze=function(e){var n=e.id,t=e.checkpoint,i=e.eventId,a="checkbox-list-label-".concat(n),c=Object(S.f)(),r=Object(J.a)(Ye,{refetchQueries:["getEvent"],awaitRefetchQueries:!0,onCompleted:function(e){c.push("/events/".concat(e.createCheckpoint.checkpoint.event_id))}}),d=Object(s.a)(r,2),l=d[0],o=d[1],u=o.loading,m=o.error,j=Object(J.a)(Be,{refetchQueries:["getEvent"],awaitRefetchQueries:!0}),b=Object(s.a)(j,1)[0],k=Xe();if(u)return Object($.jsx)("p",{children:"Loading..."});if(m)return Object($.jsx)("p",{children:"Error :("});var p=!t&&Object($.jsx)(fe.a,{variant:"contained",onClick:function(e){return function(e,n){e.stopPropagation();try{return l({variables:{eventId:i,cpId:n,cpCode:void 0,skipped:!0,skipReason:void 0}})}catch(t){throw t}}(e,n)},children:"Skip"}),v=t&&t.skipped&&Object($.jsx)("span",{className:k.skippedText,children:"skipped"});return Object($.jsxs)(E.a,{role:void 0,dense:!0,button:!0,onClick:function(){return function(e){if(t)return b({variables:{id:t.id}});try{return l({variables:{eventId:i,cpId:e,cpCode:void 0,skipped:!1,skipReason:void 0}})}catch(n){throw n}}(n)},children:[Object($.jsx)(Je.a,{children:Object($.jsx)(Me.a,{edge:"start",checked:null!=t,tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a}})}),Object($.jsx)(T.a,{id:a,primary:n}),v,p]},n)},$e=function(e){var n=e.event,t=n.id,i=n.name,a=n.checkpoints,c=n.checkpoint_count,r=Array(c).fill(c).map((function(e,n){return 1+n}));return Object($.jsxs)(_.a,{m:1,children:[Object($.jsx)(h.a,{variant:"h6",children:i}),Object($.jsx)(De,{current:a.length,max:c}),r.map((function(e){var n=a.find((function(n){return n.cp_id===e}));return Object($.jsx)(Ze,{id:e,checkpoint:n,eventId:t},e)})),Object($.jsx)(Ve,{scoredIds:a.map((function(e){return e.cp_id})),max:n.checkpoint_count})]})};var en=1,nn=function(e){var n=e.children,t=e.width,i=e.height;return Object($.jsx)(Ce.a,{speed:2,width:t,height:i,viewBox:"0 0 ".concat(t," ").concat(i),backgroundColor:"#eeeeee",foregroundColor:"#cccccc",children:n})};var tn=function(){var e=Object(S.h)().id,n=function(e){var n=Object(i.useContext)(Pe),t=n.queue,a=n.errored;return[].concat(Object(V.a)(t.filter((function(n){return n.eventId===e}))),Object(V.a)(a.filter((function(n){return n.eventId===e})).map((function(e){return Object(Se.a)(Object(Se.a)({},e),{},{checkpoint:Object(Se.a)(Object(Se.a)({},e.checkpoint),{},{error:e.error})})})))).map((function(e){return e.checkpoint}))}(parseInt(e,10)),t=ce(),a=ae(),c=Object(K.a)(Ke,{variables:{id:parseInt(e,10)},fetchPolicy:a?"cache-and-network":void 0,nextFetchPolicy:a?"cache-first":void 0}),r=c.loading,d=c.error,l=c.data,o=function(e,n){return e?Object(Se.a)(Object(Se.a)({},e),{},{checkpoints:[].concat(Object(V.a)(e.checkpoints),Object(V.a)(n.map((function(e){return{id:0,cp_id:e.cpId,cp_code:e.cpCode,skipped:e.skipped,skip_reason:e.skipReason,pending:!0,error:e.error}}))))}):e}(null===l||void 0===l?void 0:l.event,n);if(r&&!l)return Object($.jsxs)("div",{children:[Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsx)(P.a,{"aria-label":"breadcrumb",children:Object($.jsxs)(O.a,{color:"inherit",component:C.b,to:"/",className:t.link,children:[Object($.jsx)(y.a,{className:t.icon}),"Events"]})})}),Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsxs)(nn,{width:300,height:500,children:[Object($.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"45",height:"12"}),Object($.jsx)("rect",{x:"0",y:"20",rx:"3",ry:"3",width:"250",height:"3"}),Object($.jsx)("rect",{x:"30",y:"40",rx:"3",ry:"3",width:"80",height:"80"}),Object($.jsx)("rect",{x:"130",y:"40",rx:"3",ry:"3",width:"80",height:"80"}),Object($.jsx)("rect",{x:"0",y:"190",rx:"3",ry:"3",width:"45",height:"12"}),Object($.jsx)("rect",{x:"0",y:"220",rx:"3",ry:"3",width:"100",height:"10"}),Object($.jsx)("rect",{x:"0",y:"240",rx:"3",ry:"3",width:"100",height:"10"}),Object($.jsx)("rect",{x:"0",y:"260",rx:"3",ry:"3",width:"100",height:"10"})]})})]});var s=o.type===en?Object($.jsx)(Ge,{event:o,newCheckpointPath:"/events/".concat(o.id,"/add-checkpoint")}):Object($.jsx)($e,{event:o});return Object($.jsxs)("div",{children:[Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsxs)(P.a,{"aria-label":"breadcrumb",children:[Object($.jsxs)(O.a,{color:"inherit",component:C.b,to:"/",className:t.link,children:[Object($.jsx)(y.a,{className:t.icon}),"Events"]}),Object($.jsx)(h.a,{color:"textPrimary",children:o.name})]})}),Object($.jsx)(le,{active:r}),d&&Object($.jsx)("p",{children:"Error :("}),3===o.type&&o.virtual_challenge?Object($.jsx)(He,{event:o,virtualChallenge:o.virtual_challenge,newCheckpointPath:"/events/".concat(o.id,"/add-checkpoint")}):s]})},an=Object(m.a)((function(e){return Object(j.a)({margin:{margin:e.spacing(1)}})})),cn=function(){var e=Object(S.h)().id,n=Object(S.f)(),t=Object(i.useContext)(Le),a=an();return Object($.jsx)(xe.b,{onSubmit:function(i){t({type:"add",eventId:parseInt(e,10),checkpoint:{cpId:parseInt(i.cpId,10),cpCode:i.cpCode,skipped:i.skipped,skipReason:i.skipReason}}),n.push("/events/".concat(e))},initialValues:{skipped:!1},render:function(e){var n=e.values,t=(e.submitError,e.handleSubmit);return n.skipped&&delete n.cpCode,Object($.jsxs)("form",{onSubmit:t,children:[Object($.jsx)(xe.a,{name:"cpId",render:function(e){var n=e.input,t=e.meta;return Object($.jsxs)("div",{className:a.margin,children:[Object($.jsx)(je.a,Object(Se.a)(Object(Se.a)({},n),{},{label:"Id",required:!0,autoComplete:"off"})),t.touched&&(t.error||t.submitError)&&Object($.jsx)("span",{children:t.error||t.submitError})]})}}),Object($.jsx)(xe.a,{name:"cpCode",render:function(e){var t=e.input,i=e.meta;return Object($.jsxs)("div",{className:a.margin,children:[Object($.jsx)(je.a,Object(Se.a)(Object(Se.a)({},t),{},{label:"Code",required:!n.skipped,disabled:n.skipped,autoComplete:"off"})),i.touched&&(i.error||i.submitError)&&Object($.jsx)("span",{children:i.error||i.submitError})]})}}),Object($.jsx)(xe.a,{name:"skipped",type:"checkbox",render:function(e){var n=e.input;e.meta;return Object($.jsx)(_.a,{display:"flex",alignItems:"center",ml:1,children:Object($.jsx)(ve.a,{control:Object($.jsx)(Me.a,Object(Se.a)(Object(Se.a)({},n),{},{checked:n.value,name:"skipped",color:"primary"})),label:"Skip"})})}}),Object($.jsx)(fe.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})]})}})},rn=t(333),dn=t(317),ln=t(75),on="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADB/VeXAAACH0lEQVRIDbWWPU8bQRCGZ/bsJHKDROIiJh0dFESyRRKlpggWWPkNFhUSLSWiRK6pIn6DfSCSInWUgBwpFEnnKkCBAxIUFnDcDvOusGXZTrJHLltYt3czz+zHzDtm+sM4ffH+WRxfV4i4TCSTJFRw5kzH+q6l73aD4EH4eG/+8HcYHvWh/TosyKWsC/NbFtkxFIQSmB+SyylY0Z1OgSmatjEtqs2C2tT5Ea/lP1Xc937mUIB2KVy0RFss9C5DuY3xr3Pn/Q6Dz2fFj2M31FkVpiVDVM03K9uDNr35SbGxclJq/GzPhqXeS88H+MAXjH6X3g6wciHZNNng5ZPPC0f9Rr7Pv17tTNgo/sLEy92duAA4c3tFB8bQm/x+pekLHGWHnVhLH8xDmsGd6LFpLuiF4sz/FQ4WGGCBiTkjFW/i6FtWcpN/u1A4+AxcfMSdVibIPjfIc6RiWnAsACwwwdYj4jLy3GdlSWxMQJquYGuFooiSOPvYCmW/g21Q/t0K9XH0tXFMZbss8nVKYsfRhSsBQypc0JYkzl62UeYp2LjkFsd2ysspgRHEEGxc8q6lWCU53QGlBdtAzyG5KI60QoAFJtgGzQJ6DslNKwBYYILtsgjNAnp+H5keXBQYYIGJby7AnepVxUodkjvo5DuHLxgKrXa7mwsAgNNvoRr0/D47cTKtvlq4tW4vALfXcDDBSLtlDgVwQf5n03fbuPtJ42/LLeEvKdWYGdgZAAAAAElFTkSuQmCC",sn=ln.icon({iconUrl:on,shadowUrl:on,iconSize:[24,24],shadowSize:[24,24],iconAnchor:[12,12],shadowAnchor:[12,12],popupAnchor:[-3,-76]}),un=function(e){var n=e.initialPoint,t=e.startPoint,a=e.range,c=e.checkpoints,r=e.onDrag,d=e.onClick,l=e.onChange,o=Object(i.useRef)(null),u=Object(i.useRef)(null),m=Object(i.useState)(!1),j=Object(s.a)(m,2),b=j[0],k=j[1];return Object(i.useEffect)((function(){var e=ln.map("mapid").setView(n,13);return ln.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors,',maxZoom:18,id:"osm/streets",tileSize:512,zoomOffset:-1}).addTo(e),o.current=e,function(){e.off(),e.remove()}}),[n]),Object(i.useEffect)((function(){var e=o.current;if(e){var n=function(e){var n=e.latlng;d(n)};return e.on("click",n),function(){e.off("click",n)}}}),[d,o]),Object(i.useEffect)((function(){var e=o.current;if(t&&e){var n=ln.circle(t,{color:"red",opacity:.5,fillColor:"#fff",fillOpacity:.2,radius:500}).addTo(e),i=ln.marker(t,{draggable:!0});return i.on("dragstart",(function(e){k(!0)})),i.on("dragend",(function(e){k(!1)})),i.on("dragend",(function(e){var n=e.target.getLatLng();r(n)})),i.on("drag",(function(e){var t=e.target.getLatLng();n.setLatLng(t)})),e.addLayer(i),u.current=n,function(){u.current=null,e.removeLayer(i),e.removeLayer(n)}}}),[t,o,r]),Object(i.useEffect)((function(){u.current&&u.current.setRadius(a)}),[a,u]),Object(i.useEffect)((function(){var e;if(o.current&&u.current&&c&&!b){var n=null!==(e=null===c||void 0===c?void 0:c.map((function(e,n){return ln.marker([e.lat,e.lng],{draggable:!0,icon:sn}).bindTooltip("".concat(n+1),{permanent:!0,interactive:!1,className:"checkpoint-label",direction:"right"})})))&&void 0!==e?e:[];return n.forEach((function(e){var n;return null===(n=o.current)||void 0===n?void 0:n.addLayer(e)})),n.forEach((function(e){e.on("dragend",(function(e){var t=n.map((function(e){return e.getLatLng()}));l(t)}))})),function(){n.forEach((function(e){var n;return null===(n=o.current)||void 0===n?void 0:n.removeLayer(e)}))}}}),[c,u,o,b,l]),Object($.jsx)("div",{id:"mapid",style:{height:"100%"}})},mn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getVirtualPoints"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PointsNearbyInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pointsNearby"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"points"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lat"}},{kind:"Field",name:{kind:"Name",value:"lng"}}]}}]}}]}}]},jn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateVirtualChallenge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateVirtualChallengeInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createVirtualChallenge"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"}},{kind:"Field",name:{kind:"Name",value:"virtualChallenge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"checkpoints"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"points"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lat"}},{kind:"Field",name:{kind:"Name",value:"lng"}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}}]}}]},bn=function(){var e=Object(i.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Object(dn.a)(mn,{fetchPolicy:"no-cache",notifyOnNetworkStatusChange:!0}),r=Object(s.a)(c,2),d=r[0],l=r[1],o=l.loading,u=l.data,m=Object(J.a)(jn),j=Object(s.a)(m,1)[0],b=Object(i.useState)(null),k=Object(s.a)(b,2),p=k[0],v=k[1],h=Object(i.useMemo)((function(){return[54.372158,18.638306]}),[]),O=Object(i.useState)(500),f=Object(s.a)(O,2),x=f[0],g=f[1],N=Object(i.useCallback)((function(e){v([e.lat,e.lng])}),[v]),y=null!==p,S=Object(i.useCallback)((function(e){y||v([e.lat,e.lng])}),[y,v]),C=Object(i.useCallback)((function(e){a(e)}),[a]),A=Object(i.useCallback)((function(){j({variables:{input:{name:"Test",checkpoints:t.map((function(e){return{lat:e.lat.toString(),lng:e.lng.toString()}}))}}})}),[t,j]);return Object(i.useEffect)((function(){p&&d({variables:{input:{start:{lat:p[0].toString(),lng:p[1].toString()},radius:x,count:12}}})}),[d,x,p]),Object(i.useEffect)((function(){a(!o&&u?u.pointsNearby.points.map((function(e){var n=e.lat,t=e.lng;return{lat:parseFloat(n),lng:parseFloat(t)}})):[])}),[o,u]),Object($.jsxs)("div",{children:[Object($.jsxs)("div",{style:{height:200},children:[Object($.jsx)(rn.a,{value:x,onChange:function(e,n){g(Array.isArray(n)?n[0]:n)},min:100,max:2e3,"aria-labelledby":"continuous-slider"}),Object($.jsx)("br",{}),Object($.jsx)(fe.a,{onClick:A,children:"Create"})]}),Object($.jsx)("div",{style:{position:"fixed",bottom:12,left:12,right:12,top:300},children:Object($.jsx)(un,{initialPoint:h,startPoint:p,range:x,checkpoints:t,onDrag:N,onClick:S,onChange:C})})]})},kn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getVirtualChallenges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"virtualChallenges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",alias:{kind:"Name",value:"createdAt"},name:{kind:"Name",value:"created_at"}},{kind:"Field",name:{kind:"Name",value:"checkpoints"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"points"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lat"}},{kind:"Field",name:{kind:"Name",value:"lng"}}]}}]}}]}}]}}]}}]},pn=t(178),vn=t.n(pn),hn=Object(m.a)((function(e){return Object(j.a)({addChallengeButton:{position:"absolute",right:"1em",bottom:"5em"}})})),On=function(){var e,n=ae(),t=hn(),i=Object(K.a)(kn,{fetchPolicy:n?"cache-and-network":void 0,nextFetchPolicy:n?"cache-first":void 0}),a=i.data,c=i.loading,r=ce();return a?Object($.jsxs)("div",{children:[Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsx)(P.a,{"aria-label":"breadcrumb",children:Object($.jsxs)(h.a,{color:"textPrimary",className:r.link,children:[Object($.jsx)(g.a,{className:r.icon}),"Virtual Challenges"]})})}),Object($.jsx)(le,{active:c}),Object($.jsx)(L.a,{children:(null!==(e=null===a||void 0===a?void 0:a.virtualChallenges.nodes)&&void 0!==e?e:[]).map((function(e){return Object($.jsx)(E.a,{button:!0,component:C.b,to:"/virtual-challenges/".concat(e.id),children:Object($.jsx)(vn.a,{primary:e.name,secondary:Object(H.a)(new Date(e.createdAt),"dd/MM/yyyy")})},e.id)}))}),Object($.jsx)(W.a,{className:t.addChallengeButton,color:"primary","aria-label":"add",component:C.b,to:"/virtual-challenges/new",children:Object($.jsx)(z.a,{})})]}):Object($.jsx)("div",{children:"Loading"})},fn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getVirtualChallenge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"virtualChallenge"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",alias:{kind:"Name",value:"createdAt"},name:{kind:"Name",value:"created_at"}},{kind:"Field",name:{kind:"Name",value:"checkpoints"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"points"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lat"}},{kind:"Field",name:{kind:"Name",value:"lng"}}]}}]}}]}}]}}]},xn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EnrollVirtualChallenge"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enrollVirtualChallenge"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"}},{kind:"Field",name:{kind:"Name",value:"event"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"checkpoint_count"}},{kind:"Field",name:{kind:"Name",value:"created_at"}},{kind:"Field",name:{kind:"Name",value:"updated_at"}}]}}]}}]}}]},gn=function(){var e=ae(),n=ce(),t=Object(S.f)(),i=Object(S.h)().id,a=Object(K.a)(fn,{fetchPolicy:e?"cache-and-network":void 0,nextFetchPolicy:e?"cache-first":void 0,variables:{id:parseInt(i,10)}}).data,c=Object(J.a)(xn,{refetchQueries:[{query:M}],awaitRefetchQueries:!0,onCompleted:function(e){e.enrollVirtualChallenge.event&&t.push("/events/".concat(e.enrollVirtualChallenge.event.id))},variables:{id:parseInt(i,10)}}),r=Object(s.a)(c,1)[0],d=null===a||void 0===a?void 0:a.virtualChallenge;return d?Object($.jsxs)("div",{children:[Object($.jsx)(_.a,{px:1,py:2,children:Object($.jsxs)(P.a,{"aria-label":"breadcrumb",children:[Object($.jsxs)(O.a,{color:"inherit",component:C.b,to:"/virtual-challenges",className:n.link,children:[Object($.jsx)(g.a,{className:n.icon}),"Virtual Challenges"]}),Object($.jsx)(h.a,{color:"textPrimary",children:d.name})]})}),Object($.jsx)(fe.a,{onClick:function(){return r()},children:"Join"})]}):Object($.jsx)("div",{children:"NOT FOUND"})},Nn=t(329),yn=t(179),Sn=t.n(yn),Cn=Object(i.createContext)(null),An=function(){var e=Object(i.useContext)(Cn),n=Object(i.useState)(!1),t=Object(s.a)(n,2),c=t[0],r=t[1],d=Object(i.useState)(null),l=Object(s.a)(d,2),o=l[0],u=l[1];Object(i.useEffect)((function(){if(e){var n=function(e){u(e)};return e.onUpdate(n),function(){e.offUpdate(n)}}}),[e]);var m=function(){u(null)};return Object($.jsx)(Nn.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:m,message:"A new version of the app is available!",action:Object($.jsxs)(a.a.Fragment,{children:[Object($.jsx)(fe.a,{color:"secondary",size:"small",onClick:function(){if(o){r(!0);var e=o.waiting;e&&(e.postMessage({type:"SKIP_WAITING"}),e.addEventListener("statechange",(function(e){var n=e.target?e.target:null;"activated"===(null===n||void 0===n?void 0:n.state)&&window.location.reload()})))}},disabled:c,children:"RELOAD"}),Object($.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:m,children:Object($.jsx)(Sn.a,{fontSize:"small"})})]})})},wn=t(142),Fn=function(){var e=Object(i.useContext)(Pe).queue,n=Object(i.useContext)(Le),t=e[0],a=Object(J.a)(Ye,{awaitRefetchQueries:!0,onCompleted:function(e){if(e.createCheckpoint.checkpoint){var t=e.createCheckpoint.checkpoint,i=t.cp_id,a=t.event_id;n({type:"delete",id:i,eventId:a})}}}),c=Object(s.a)(a,1)[0];return Object(i.useEffect)((function(){t&&c({refetchQueries:[{query:Ke,variables:{id:t.eventId}}],variables:{eventId:t.eventId,cpId:t.checkpoint.cpId,cpCode:t.checkpoint.cpCode,skipped:t.checkpoint.skipped,skipReason:t.checkpoint.skipReason}}).catch((function(e){n({type:"errored",checkpoint:t.checkpoint,eventId:t.eventId,error:e})}))}),[t,n,c]),null},In=function(){var e=Object(i.useContext)(Pe).errored,n=Object(i.useState)(!0),t=Object(s.a)(n,2),a=t[0],c=t[1],r=e.map((function(e){return"Error during saving point ".concat(e.checkpoint.cpId)}));return Object(i.useEffect)((function(){c(!0)}),[e,c]),0===r.length?null:Object($.jsx)(Nn.a,{anchorOrigin:{vertical:"top",horizontal:"right"},onClose:function(){return c(!1)},open:a,message:r.map((function(e){return Object($.jsx)("div",{children:e})})),autoHideDuration:5e3})},Dn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SignIn"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"signIn"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]},Vn=function(){var e=Object(J.a)(Dn,{onCompleted:function(){var e=new URLSearchParams(window.location.search).get("redirect_url");window.location.href=e?decodeURIComponent(e):"/"}}),n=Object(s.a)(e,1)[0];return Object($.jsx)(_.a,{px:2,py:1,children:Object($.jsx)(xe.b,{onSubmit:function(e){return n({variables:e})},render:function(e){var n=e.handleSubmit;return Object($.jsxs)("form",{onSubmit:n,children:[Object($.jsx)("h2",{children:"Sign In"}),Object($.jsx)(xe.a,{name:"name",render:function(e){var n=e.input,t=e.meta;return Object($.jsxs)(_.a,{my:1,children:[Object($.jsx)(je.a,{id:"standard-basic",label:"Name",required:!0,autoComplete:"off",onChange:n.onChange}),t.touched&&t.error&&Object($.jsx)("span",{children:t.error})]})}}),Object($.jsx)(fe.a,{variant:"contained",color:"primary",type:"submit",children:"Create"})]})}})})},En={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"JoinEvent"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"joinEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"}}]}}]}}]},Tn=function(){var e,n=Object(S.h)().id,t=Object(S.g)(),a=Object(S.f)(),c=new URLSearchParams(t.search),r=Object(J.a)(En,{variables:{id:parseInt(n,10),token:c.get("token")},onCompleted:function(e){var t;(null===e||void 0===e||null===(t=e.joinEvent)||void 0===t?void 0:t.success)&&a.push("/events/".concat(n))}}),d=Object(s.a)(r,2),l=d[0],o=d[1],u=o.data,m=o.loading;return Object(i.useEffect)((function(){l()}),[l]),m?Object($.jsx)("div",{children:"Joining"}):(null===u||void 0===u||null===(e=u.joinEvent)||void 0===e?void 0:e.success)?Object($.jsx)("div",{children:"Success"}):Object($.jsx)("div",{children:"Couldn't join"})},_n=Object(u.a)((function(e){var n=e.graphQLErrors;n&&n.forEach((function(e){var n=e.extensions;n&&"UNAUTHENTICATED"===n.code&&(window.location.href="/sign-in?redirect_url="+encodeURIComponent(window.location.href))}))})),Pn=function(){return Object(A.a)({credentials:"include",uri:"https://woodtime-api.ertrzyiks.me/woodtime"})},Ln=Object(m.a)((function(e){return Object(j.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},loaderWrapper:{alignItems:"center",width:"100%",height:"100%",justifyContent:"center",display:"flex"},bottomBar:{position:"fixed",bottom:0,width:"100%"}})}));function Rn(e){var n=e.className,t=Object(S.f)(),i=Object(S.g)();return"/"!==i.pathname&&"/virtual-challenges"!==i.pathname?null:Object($.jsxs)(b.a,{value:"/"===i.pathname?0:1,onChange:function(e,n){0===n?t.push("/"):t.push("/virtual-challenges")},showLabels:!0,className:n,children:[Object($.jsx)(k.a,{label:"Events",icon:Object($.jsx)(y.a,{})}),Object($.jsx)(k.a,{label:"Virtual Challenges",icon:Object($.jsx)(g.a,{})})]})}var Wn=function(){var e=Object(i.useState)(null),n=Object(s.a)(e,2),t=n[0],a=n[1],c=Ln();return Object(i.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.a,e.next=3,Object(wn.b)({cache:n,storage:new wn.a(window.localStorage)});case 3:a(new F.a({cache:n,link:I.ApolloLink.from([_n,Pn()])}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch(console.error)}),[a]),Object($.jsxs)(C.a,{basename:"",children:[Object($.jsx)(An,{}),Object($.jsxs)(ie,{children:[Object($.jsx)(p.a,{position:"static",children:Object($.jsx)(v.a,{children:Object($.jsx)(h.a,{variant:"h6",className:c.title,children:Object($.jsx)(O.a,{component:C.b,to:"/",color:"inherit",children:"Woodtime"})})})}),t?Object($.jsxs)(D.a,{client:t,children:[Object($.jsxs)(We,{children:[Object($.jsx)(Fn,{}),Object($.jsx)(In,{}),Object($.jsxs)(S.c,{children:[Object($.jsx)(S.a,{path:"/",exact:!0,children:Object($.jsx)(ue,{})}),Object($.jsxs)(S.a,{path:"/events/new",exact:!0,children:[Object($.jsx)(ue,{}),Object($.jsx)(ye,{})]}),Object($.jsx)(S.a,{path:"/events/:id",exact:!0,children:Object($.jsx)(tn,{})}),Object($.jsx)(S.a,{path:"/events/:id/add-checkpoint",exact:!0,children:Object($.jsx)(cn,{})}),Object($.jsx)(S.a,{path:"/virtual-challenges",exact:!0,children:Object($.jsx)(On,{})}),Object($.jsx)(S.a,{path:"/virtual-challenges/new",exact:!0,children:Object($.jsx)(bn,{})}),Object($.jsx)(S.a,{path:"/virtual-challenges/:id",exact:!0,children:Object($.jsx)(gn,{})}),Object($.jsx)(S.a,{path:"/join/:id",exact:!0,children:Object($.jsx)(Tn,{})}),Object($.jsx)(S.a,{path:"/sign-in",exact:!0,children:Object($.jsx)(Vn,{})})]})]}),Object($.jsx)(Rn,{className:c.bottomBar})]}):Object($.jsx)("div",{className:c.loaderWrapper,children:Object($.jsx)(f.a,{})})]})]})},Bn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zn(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Qn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,335)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),i(e),a(e),c(e),r(e)}))},qn=[],Un=[],Gn=function(e){var n=e.children,t={onSuccess:function(e){return qn.push(e)},offSuccess:function(e){return qn.filter((function(n){return n!==e}))},onUpdate:function(e){return Un.push(e)},offUpdate:function(e){return Un.filter((function(n){return n!==e}))}};return Object($.jsx)(Cn.Provider,{value:t,children:n})};r.a.render(Object($.jsx)(a.a.StrictMode,{children:Object($.jsx)(Gn,{children:Object($.jsx)(Wn,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");Bn?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):zn(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):zn(n,e)}))}}({onUpdate:function(e){Un.forEach((function(n){return n(e)}))},onSuccess:function(){qn.forEach((function(e){return e()}))}}),Qn()}},[[251,1,2]]]);
//# sourceMappingURL=main.56982df7.chunk.js.map