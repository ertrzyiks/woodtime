{"version":3,"sources":["../../src/scan.ts","queries/getEvents.js","queries/event.js","queries/createEvent.js","queries/createCheckpoint.js","queries/deleteEvent.js","queries/deleteCheckpoint.js","components/SimpleChecklist/SimpleChecklist.tsx","components/InitialNavigationDetector/InitialNavigationDetector.tsx","hooks/useInitialNavigation.ts","hooks/useBreadcrumbStyles.ts","components/LoadingIndicator/LoadingIndicator.tsx","components/EventList/EventList.tsx","components/AddEvent/AddEvent.tsx","components/MissingCheckpointsArea/MissingCheckpointsArea.tsx","components/CheckpointCard/CheckpointCard.tsx","components/Solution/Solution.tsx","components/ScoreLauf/ScoreLauf.tsx","components/EventPage/EventPage.tsx","../../src/prepareImage.ts","../../src/Scanner.tsx","../../src/detectHarpus.ts","components/AddCheckpointPage/AddCheckpointPage.tsx","assets/oval.png","components/AddVirtualChallenge/Map.tsx","queries/getVirtualPoints.js","queries/createVirtualChallenge.js","components/AddVirtualChallenge/AddVirtualChallenge.tsx","queries/getVirtualChallenges.js","components/VirtualChallengeList/VirtualChallengeList.tsx","queries/getVirtualChallenge.js","queries/enrollVirtualChallenge.js","components/VirtualChallenge/VirtualChallenge.tsx","components/PwaUpdaterContext/PwaUpdaterContext.tsx","components/PwaUpdateNofication/PwaUpdateNotification.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["GET_EVENTS","gql","GET_EVENT","CREATE_EVENT","CREATE_CHECKPOINT","DELETE_EVENT","DELETE_CHECKPOINT","useStyles","makeStyles","theme","createStyles","listWrapper","padding","SimpleChecklist","props","classes","Dialog","aria-labelledby","open","onClose","handleClose","DialogTitle","id","List","className","map","text","ndx","ListItem","dense","ListItemText","primary","primaryTypographyProps","variant","InitialNavigationContext","React","createContext","InitialNavigationDetector","children","useState","firstPathName","setFirstPathName","isFirst","setIsFirst","location","useLocation","useEffect","pathname","Provider","value","useInitialNavigation","useContext","useBreadcrumbStyles","link","display","icon","marginRight","spacing","width","height","root","LoadingIndicator","active","LinearProgress","color","Event","name","createdAt","button","component","Link","to","secondary","format","Date","wrapper","deleteIcon","icons","justifyContent","addEventButton","position","right","bottom","EventList","isInitialNavigation","useQuery","fetchPolicy","undefined","nextFetchPolicy","loading","error","data","showChecklist","setShowChecklist","useMutation","refetchQueries","awaitRefetchQueries","deleteEvent","breadcrumbClasses","Box","px","py","Breadcrumbs","aria-label","Typography","events","sort","a","b","created_at","IconButton","onClick","variables","Fab","radioGroupWrapper","paddingTop","paddingBottom","title","radioLabel","fontSize","AddEvent","setName","numCheckpoints","setNumCheckpoints","type","setType","history","useHistory","query","onCompleted","push","createEvent","event","keepMounted","aria-describedby","onSubmit","eventTypeId","checkpointCount","parseInt","render","handleSubmit","DialogContent","input","meta","TextField","label","required","autoComplete","onChange","e","target","touched","FormControl","FormLabel","RadioGroup","FormControlLabel","control","Radio","size","DialogActions","Button","MissingCheckpointsArea","scoredIds","max","missingPoints","Array","fill","_","idx","filter","p","includes","length","mt","minWidth","ml","mb","alignItems","join","header","backgroundColor","content","border","paddingLeft","paddingRight","boxSizing","top","CheckpointCard","checkpoint","deleteCheckpoint","style","flexDirection","cp_id","skipped","cp_code","toUpperCase","checkpointId","Solution","checkpoints","parsedCodes","matchingCheckpoint","find","ch","LinearProgressWithLabel","current","mr","flexGrow","paper","item","addCheckpointButton","ScoreLauf","newCheckpointPath","m","checkpoint_count","Grid","container","xs","justify","Paper","eventId","EventPage","useParams","RouterLink","y","results","match","margin","AddCheckpointPage","scanning","setScanning","scannerRead","setScannerRead","createCheckpoint","event_id","creationLoading","creationError","cpId","cpCode","skipReason","err","message","startsWith","FORM_ERROR","initialValues","values","submitError","disabled","Checkbox","checked","marginTop","marginBottom","onRead","point","background","code","checkpointIcon","L","iconUrl","oval","shadowUrl","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","Map","initialPoint","startPoint","range","onDrag","mapRef","useRef","circleRef","dragging","setDragging","setView","attribution","maxZoom","tileSize","zoomOffset","addTo","off","remove","callback","latlng","on","circle","opacity","fillColor","fillOpacity","radius","marker","draggable","getLatLng","setLatLng","addLayer","removeLayer","setRadius","markers","index","lat","lng","bindTooltip","permanent","interactive","direction","forEach","newCheckPoints","GET_VIRTUAL_POINTS","CREATE_VIRTUAL_CHALLENGE","AddVirtualChallenge","points","setPoints","useLazyQuery","notifyOnNetworkStatusChange","getPoints","create","setStartPoint","useMemo","setRange","handlePositionDrag","useCallback","coords","hasPoint","handleMapClick","handlePointsChange","handleCreate","toString","start","count","pointsNearby","parseFloat","Slider","newValue","isArray","min","left","GET_VIRTUAL_CHALLENGES","VirtualChallengeList","virtualChallenges","nodes","challenge","GET_VIRTUAL_CHALLENGE","ENROLL_VIRTUAL_CHALLENGE","VirtualChallenge","enrollVirtualChallenge","enroll","virtualChallenge","PwaUpdaterContext","PwaUpdateNotification","updater","setLoading","registration","setRegistration","handleUpdate","reg","onUpdate","offUpdate","Snackbar","anchorOrigin","vertical","horizontal","Boolean","action","Fragment","registrationWaiting","waiting","postMessage","addEventListener","state","window","reload","getLink","createHttpLink","uri","process","menuButton","loaderWrapper","App","client","setClient","cache","InMemoryCache","persistCache","storage","LocalStorageWrapper","localStorage","ApolloClient","init","catch","console","basename","AppBar","Toolbar","ApolloProvider","path","exact","CircularProgress","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","onupdatefound","installingWorker","installing","onstatechange","controller","log","onSuccess","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","onSuccessCallbacks","onUpdateCallbacks","UpdaterProvider","cb","offSuccess","fn","ReactDOM","StrictMode","document","getElementById","URL","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.520532f8.chunk.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { createWorker } from 'tesseract.js';\nexport function buildWorker() {\n    return __awaiter(this, void 0, void 0, function () {\n        var worker;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    worker = createWorker(typeof process === 'object'\n                        ? {}\n                        : {\n                            corePath: require('file-loader!tesseract.js-core/tesseract-core.asm.js').default\n                        });\n                    return [4, worker.load()];\n                case 1:\n                    _a.sent();\n                    return [4, worker.loadLanguage('pol')];\n                case 2:\n                    _a.sent();\n                    return [4, worker.initialize('pol')];\n                case 3:\n                    _a.sent();\n                    return [4, worker.setParameters({\n                            tessedit_char_whitelist: '0123456789AĄBCĆDĘEFGHIJKLŁMNŃOÓPRSŚTUVWXYZŻŹ !?-'\n                        })];\n                case 4:\n                    _a.sent();\n                    return [2, worker];\n            }\n        });\n    });\n}\nexport function scan(worker, image) {\n    return __awaiter(this, void 0, void 0, function () {\n        var text;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, worker.recognize(image)];\n                case 1:\n                    text = (_a.sent()).data.text;\n                    return [2, text];\n            }\n        });\n    });\n}\n//# sourceMappingURL=scan.js.map","import gql from 'graphql-tag';\n\nexport const GET_EVENTS = gql`\n  query getEvents {\n    events {\n      id\n      name\n      checkpoint_count\n      created_at\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const GET_EVENT = gql`\n  query getEvent($id: Int!) {\n    event(id: $id) {\n      id\n      name\n      checkpoint_count\n      checkpoints {\n        id\n        cp_id\n        cp_code\n        event_id\n        skipped\n        skip_reason\n      }\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const CREATE_EVENT = gql`\n  mutation CreateEvent($name: String!, $checkpointCount: Int!, $type: Int!) {\n    createEvent(name: $name, checkpointCount: $checkpointCount, type: $type) {\n      event {\n        id\n        name\n        type\n        checkpoint_count\n        created_at\n        updated_at\n      }\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const CREATE_CHECKPOINT = gql`\n  mutation CreateCheckpoint(\n    $eventId: Int!\n    $cpId: Int!\n    $cpCode: String\n    $skipped: Boolean\n    $skipReason: String\n  ) {\n    createCheckpoint(\n      event_id: $eventId\n      cp_id: $cpId\n      cp_code: $cpCode\n      skipped: $skipped\n      skip_reason: $skipReason\n    ) {\n      checkpoint {\n        id\n        event_id\n        cp_id\n        cp_code\n        skipped\n        skip_reason\n        created_at\n        updated_at\n      }\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const DELETE_EVENT = gql`\n  mutation DeleteEvent($id: Int!) {\n    deleteEvent(id: $id) {\n      id\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const DELETE_CHECKPOINT = gql`\n  mutation DeleteCheckpoint($id: Int!) {\n    deleteCheckpoint(id: $id) {\n      id\n    }\n  }\n`;\n","import {\n  createStyles,\n  Dialog,\n  DialogTitle,\n  List,\n  ListItem,\n  ListItemText,\n  makeStyles,\n  Theme,\n} from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  handleClose: () => void;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    listWrapper: {\n      padding: 10,\n    },\n  })\n);\n\nconst SimpleChecklist = (props: Props) => {\n  const items: string[] = [\n    '4 kanapki',\n    'dwa bidony wody',\n    'kubek Kuby',\n    'jabłko w kawałkach',\n    'banan',\n    'ciastka',\n    'pampersy',\n    'chusteczki mokre',\n    'worek na śmieci',\n    'chusteczki zwykłe',\n    'pęseta',\n    'octenisept',\n    'żel do dezynfekcji',\n  ];\n\n  const classes = useStyles();\n\n  return (\n    <Dialog\n      aria-labelledby=\"simple-checklist-title\"\n      open\n      onClose={props.handleClose}\n    >\n      <DialogTitle id=\"simple-checklist-title\">Rzeczy do zabrania</DialogTitle>\n      <List className={classes.listWrapper}>\n        {items.map((text, ndx: number) => (\n          <ListItem key={ndx} dense>\n            <ListItemText\n              primary={text}\n              primaryTypographyProps={{ variant: 'body1' }}\n            />\n          </ListItem>\n        ))}\n      </List>\n    </Dialog>\n  );\n};\n\nexport default SimpleChecklist;\n","import React, {ReactNode, useEffect, useState} from 'react'\nimport { useLocation } from 'react-router-dom'\n\nexport const InitialNavigationContext = React.createContext(false)\n\ninterface Props {\n  children: ReactNode\n}\n\nconst InitialNavigationDetector = ({ children }: Props) => {\n  const [firstPathName, setFirstPathName] = useState<string | null>(null)\n  const [isFirst, setIsFirst] = useState(true)\n  const location = useLocation()\n\n  useEffect(() => {\n    if (!firstPathName) {\n      setFirstPathName(location.pathname)\n    } else if (firstPathName !== location.pathname) {\n      setIsFirst(false)\n    }\n  }, [firstPathName, location.pathname, isFirst, setIsFirst])\n\n  return (\n    <InitialNavigationContext.Provider value={(!firstPathName || firstPathName === location.pathname) && isFirst}>\n      {children}\n    </InitialNavigationContext.Provider>\n  )\n}\n\nexport default InitialNavigationDetector\n","import {useContext} from \"react\";\n\nimport {InitialNavigationContext} from \"../components/InitialNavigationDetector/InitialNavigationDetector\";\n\nexport function useInitialNavigation() {\n  return useContext(InitialNavigationContext)\n}\n","import {\n  createStyles,\n  makeStyles,\n  Theme,\n} from '@material-ui/core';\n\nexport const useBreadcrumbStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    link: {\n      display: 'flex',\n    },\n    icon: {\n      marginRight: theme.spacing(0.5),\n      width: 20,\n      height: 20,\n    },\n  })\n);\n","import React from 'react'\nimport {createStyles, LinearProgress, makeStyles, Theme} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      height: 4\n    }\n  })\n);\n\ninterface Props {\n  active: boolean\n}\n\nconst LoadingIndicator = ({ active }: Props) => {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      {active && <LinearProgress color=\"secondary\" />}\n    </div>\n  )\n}\n\nexport default LoadingIndicator\n","import {\n  Box,\n  Breadcrumbs,\n  createStyles,\n  Fab,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  makeStyles,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport EventIcon from '@material-ui/icons/Event';\nimport ListIcon from '@material-ui/icons/List';\nimport { Link } from 'react-router-dom';\nimport format from 'date-fns/format';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_EVENTS, DELETE_EVENT } from '../../queries';\nimport SimpleChecklist from '../SimpleChecklist/SimpleChecklist';\nimport React, { useState } from 'react';\nimport { useInitialNavigation } from '../../hooks/useInitialNavigation';\nimport { useBreadcrumbStyles } from '../../hooks/useBreadcrumbStyles';\nimport LoadingIndicator from '../LoadingIndicator/LoadingIndicator';\n\nconst Event = ({\n  id,\n  name,\n  createdAt,\n}: {\n  id: number;\n  name: string;\n  createdAt: string;\n}) => (\n  <ListItem button component={Link} to={`/events/${id}`}>\n    <ListItemText\n      primary={name}\n      secondary={format(new Date(createdAt), 'dd/MM/yyyy')}\n    />\n  </ListItem>\n);\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wrapper: {\n      display: 'flex',\n      width: '100%',\n    },\n    deleteIcon: {},\n    icons: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    listWrapper: {},\n    addEventButton: {\n      position: 'absolute',\n      right: '1em',\n      bottom: '1em',\n    },\n  })\n);\n\nconst EventList = () => {\n  const isInitialNavigation = useInitialNavigation();\n  const { loading, error, data } = useQuery(GET_EVENTS, {\n    fetchPolicy: isInitialNavigation ? 'cache-and-network' : undefined,\n    nextFetchPolicy: isInitialNavigation ? 'cache-first' : undefined,\n  });\n  const [showChecklist, setShowChecklist] = useState(false);\n\n  const [deleteEvent] = useMutation(DELETE_EVENT, {\n    refetchQueries: ['getEvents'],\n    awaitRefetchQueries: true,\n  });\n\n  const handleChecklistClick = () => {\n    setShowChecklist(true);\n  };\n\n  const handleChecklistClose = () => {\n    setShowChecklist(false);\n  };\n\n  const handleDeleteClick = (eventId: number) => {\n    return deleteEvent({ variables: { id: eventId } });\n  };\n\n  const classes = useStyles();\n  const breadcrumbClasses = useBreadcrumbStyles();\n\n  if (loading && !data) {\n    return <p>Loading...</p>;\n  }\n\n  if (error) {\n    return <p>Error :(</p>;\n  }\n\n  return (\n    <div className={classes.listWrapper}>\n      <Box px={1} py={2}>\n        <Breadcrumbs aria-label=\"breadcrumb\">\n          <Typography color=\"textPrimary\" className={breadcrumbClasses.link}>\n            <EventIcon className={breadcrumbClasses.icon} />\n            Events\n          </Typography>\n        </Breadcrumbs>\n      </Box>\n\n      <LoadingIndicator active={loading} />\n\n      {error && <p>Error :(</p>}\n\n      <List>\n        {[...data.events]\n          .sort((a: { id: number }, b: { id: number }) => b.id - a.id)\n          // TODO: generate types\n          .map(\n            ({\n              id,\n              name,\n              created_at,\n            }: {\n              id: number;\n              name: string;\n              created_at: string;\n            }) => (\n              <div className={classes.wrapper} key={id}>\n                <Event id={id} name={name} createdAt={created_at} />\n                <div className={classes.icons}>\n                  <IconButton\n                    aria-label=\"checklist\"\n                    onClick={() => handleChecklistClick()}\n                  >\n                    <ListIcon />\n                  </IconButton>\n                  <IconButton\n                    aria-label=\"delete\"\n                    onClick={() => handleDeleteClick(id)}\n                  >\n                    <ClearIcon />\n                  </IconButton>\n                </div>\n              </div>\n            )\n          )}\n      </List>\n\n      {showChecklist && <SimpleChecklist handleClose={handleChecklistClose} />}\n      <Fab\n        className={classes.addEventButton}\n        color=\"primary\"\n        aria-label=\"add\"\n        component={Link}\n        to=\"/events/new\"\n      >\n        <AddIcon />\n      </Fab>\n    </div>\n  );\n};\n\nexport default EventList;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  createStyles,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  FormControl,\n  FormControlLabel,\n  FormLabel,\n  makeStyles,\n  Radio,\n  RadioGroup,\n  TextField,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport { Field, Form } from 'react-final-form';\nimport { useMutation } from '@apollo/client';\n\nimport {CREATE_EVENT, GET_EVENTS} from '../../queries';\n\ninterface Values {\n  name: string;\n  numCheckpoints: string;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    radioGroupWrapper: {\n      paddingTop: 25,\n      paddingBottom: 10,\n    },\n    title: {\n      paddingBottom: 0,\n    },\n    radioLabel: {\n      fontSize: '0.6rem',\n    },\n  })\n);\n\nconst AddEvent = () => {\n  const [name, setName] = useState('');\n  const [numCheckpoints, setNumCheckpoints] = useState('');\n  const [type, setType] = useState('score');\n\n  const history = useHistory();\n\n  const [createEvent] = useMutation(CREATE_EVENT, {\n    refetchQueries: [{ query: GET_EVENTS }],\n    awaitRefetchQueries: true,\n    onCompleted: (data) => {\n      history.push(`/events/${data.createEvent.event.id}`);\n    },\n  });\n\n  const classes = useStyles();\n\n  const handleClose = () => {\n    history.push('/');\n  };\n\n  const handleSubmit = () => {\n    const eventTypeId = type === 'score' ? 1 : 2;\n    return createEvent({\n      variables: {\n        name,\n        checkpointCount: parseInt(numCheckpoints, 10),\n        type: eventTypeId,\n      },\n    });\n  };\n\n  return (\n    <Dialog\n      open\n      keepMounted\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-slide-title\"\n      aria-describedby=\"alert-dialog-slide-description\"\n    >\n      <DialogTitle id=\"alert-dialog-slide-title\" className={classes.title}>\n        Create a new event\n      </DialogTitle>\n      <Form<Values>\n        onSubmit={handleSubmit}\n        render={({ handleSubmit }) => {\n          return (\n            <form onSubmit={handleSubmit}>\n              <DialogContent>\n                <Field\n                  name=\"name\"\n                  render={({ input, meta }) => (\n                    <div>\n                      <TextField\n                        id=\"standard-basic\"\n                        label=\"Name\"\n                        required\n                        autoComplete=\"off\"\n                        onChange={(e) => setName(e.target.value)}\n                      />\n                      {meta.touched && meta.error && <span>{meta.error}</span>}\n                    </div>\n                  )}\n                />\n\n                <Field\n                  name=\"points\"\n                  render={({ input, meta }) => (\n                    <div>\n                      <TextField\n                        id=\"standard-basic\"\n                        label=\"Points\"\n                        required\n                        autoComplete=\"off\"\n                        onChange={(e) => setNumCheckpoints(e.target.value)}\n                      />\n                      {meta.touched && meta.error && <span>{meta.error}</span>}\n                    </div>\n                  )}\n                />\n\n                <Field\n                  name=\"type\"\n                  render={() => (\n                    <div className={classes.radioGroupWrapper}>\n                      <FormControl component=\"fieldset\">\n                        <FormLabel component=\"legend\">Type</FormLabel>\n                        <RadioGroup\n                          aria-label=\"type\"\n                          name=\"type\"\n                          value={type}\n                          onChange={(e) => setType(e.target.value)}\n                        >\n                          <FormControlLabel\n                            value=\"score\"\n                            control={<Radio size=\"small\" />}\n                            label={\n                              <Typography variant=\"body2\">Scorelauf</Typography>\n                            }\n                          />\n                          <FormControlLabel\n                            value=\"classic\"\n                            control={<Radio size=\"small\" />}\n                            label={\n                              <Typography variant=\"body2\">Classic</Typography>\n                            }\n                          />\n                        </RadioGroup>\n                      </FormControl>\n                    </div>\n                  )}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                  Create\n                </Button>\n                <Button onClick={handleClose} color=\"primary\">\n                  Cancel\n                </Button>\n              </DialogActions>\n            </form>\n          );\n        }}\n      />\n    </Dialog>\n  );\n};\n\nexport default AddEvent;\n","import { Box, Typography } from '@material-ui/core';\nimport React from 'react';\n\ninterface Props {\n  scoredIds: number[];\n  max: number;\n}\n\nconst MissingCheckpointsArea = ({ scoredIds, max }: Props) => {\n  const allPoints = Array(max)\n    .fill(max)\n    .map((_, idx) => 1 + idx);\n  const missingPoints = allPoints.filter((p) => !scoredIds.includes(p));\n\n  if (scoredIds.length === 0 || scoredIds.length === max) {\n    return null;\n  }\n\n  return (\n    <Box mt={3}>\n      <Box minWidth={35} ml={1} mb={1}>\n        <Typography>Missing:</Typography>\n      </Box>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box width=\"100%\" ml={1}>\n          {missingPoints.join(', ')}\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default MissingCheckpointsArea;\n","import {\n  createStyles,\n  IconButton,\n  Theme,\n  makeStyles,\n  Typography,\n} from '@material-ui/core';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport React from 'react';\nimport { Checkpoint } from '../../types/Checkpoint';\nimport { useMutation } from '@apollo/client';\nimport { DELETE_CHECKPOINT } from '../../queries/deleteCheckpoint';\n\ninterface Props {\n  checkpoint: Checkpoint;\n  eventId: number;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    wrapper: {\n      width: '100%',\n    },\n    header: {\n      padding: 10,\n      paddingBottom: 2,\n      backgroundColor: '#c5cae9',\n    },\n    content: {\n      border: '1px solid #c5cae9',\n\n      width: '100%',\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingBottom: 10,\n      padding: 10,\n      boxSizing: 'border-box',\n    },\n    deleteIcon: {\n      position: 'absolute',\n      top: -3,\n      right: -5,\n    },\n  })\n);\n\nconst CheckpointCard = ({ checkpoint }: Props) => {\n  const [deleteCheckpoint] = useMutation(DELETE_CHECKPOINT, {\n    refetchQueries: ['getEvent'],\n    awaitRefetchQueries: true,\n  });\n\n  const handleDeleteClick = (checkpointId: number) => {\n    return deleteCheckpoint({ variables: { id: checkpointId } });\n  };\n\n  const classes = useStyles();\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'row',\n        position: 'relative',\n      }}\n    >\n      <div className={classes.wrapper}>\n        <div className={classes.header}>\n          <Typography variant=\"button\" color=\"textSecondary\">\n            {checkpoint.cp_id}\n          </Typography>\n        </div>\n        <div className={classes.content}>\n          <Typography variant=\"subtitle1\">\n            <span>\n              {checkpoint.skipped\n                ? 'skipped'\n                : checkpoint.cp_code?.toUpperCase()}\n            </span>\n          </Typography>\n        </div>\n      </div>\n      <div className={classes.deleteIcon}>\n        <IconButton\n          aria-label=\"delete\"\n          onClick={() => handleDeleteClick(checkpoint.id)}\n        >\n          <ClearIcon />\n        </IconButton>\n      </div>\n    </div>\n  );\n};\n\nexport default CheckpointCard;\n","import { Box, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { Checkpoint } from '../../types/Checkpoint';\n\ninterface Props {\n  checkpoints: Checkpoint[];\n  max: number;\n}\n\nconst Solution = ({ checkpoints, max }: Props) => {\n  const seqCheckpointIds = Array(max)\n    .fill(max)\n    .map((_, idx) => 1 + idx);\n\n  const parsedCodes = seqCheckpointIds.map((id: number) => {\n    const matchingCheckpoint = checkpoints.find((ch) => ch.cp_id === id);\n    if (!matchingCheckpoint || matchingCheckpoint.skipped) {\n      return '...';\n    }\n\n    return matchingCheckpoint.cp_code;\n  });\n\n  return (\n    <Box mt={3}>\n      <Box minWidth={35} ml={1} mb={1}>\n        <Typography variant=\"h6\">Solution:</Typography>\n      </Box>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box width=\"100%\" ml={1}>\n          {parsedCodes.join(' ')}\n        </Box>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Solution;\n","import {\n  Box,\n  createStyles,\n  Fab,\n  Grid,\n  GridSpacing,\n  makeStyles,\n  Paper,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport React from 'react';\nimport { OrienteeringEvent } from '../../types/OrienteeringEvent';\n\nimport LinearProgress, {\n  LinearProgressProps,\n} from '@material-ui/core/LinearProgress';\nimport AddIcon from '@material-ui/icons/Add';\nimport { Link } from 'react-router-dom';\nimport MissingCheckpointsArea from '../MissingCheckpointsArea/MissingCheckpointsArea';\nimport CheckpointCard from '../CheckpointCard/CheckpointCard';\nimport Solution from '../Solution/Solution';\n\nfunction LinearProgressWithLabel({\n  current,\n  max,\n  ...props\n}: LinearProgressProps & { current: number; max: number }) {\n  const value = (100 * current) / max;\n\n  return (\n    <Box display=\"flex\" alignItems=\"center\">\n      <Box width=\"100%\" mr={1}>\n        <LinearProgress variant=\"determinate\" {...props} value={value} />\n      </Box>\n      <Box minWidth={35}>\n        <Typography variant=\"body2\" color=\"textSecondary\">\n          {current}/{max}\n        </Typography>\n      </Box>\n    </Box>\n  );\n}\n\ninterface Props {\n  event: OrienteeringEvent;\n  newCheckpointPath: string;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n      padding: 20,\n    },\n    paper: {\n      width: 80,\n    },\n    item: {\n      padding: 5,\n    },\n    control: {\n      padding: theme.spacing(2),\n    },\n    addCheckpointButton: {\n      position: 'absolute',\n      right: '1em',\n      bottom: '1em'\n    },\n  })\n);\n\nconst ScoreLauf = ({ event, newCheckpointPath }: Props) => {\n  const checkpoints = event.checkpoints;\n\n  const [spacing] = React.useState<GridSpacing>(2);\n\n  const classes = useStyles();\n\n  return (\n    <Box m={1}>\n      <Typography variant=\"h6\">{event.name}</Typography>\n      <LinearProgressWithLabel\n        current={checkpoints.length}\n        max={event.checkpoint_count}\n      />\n\n      {checkpoints.length > 0 && (\n        <Grid container className={classes.root} spacing={2}>\n          <Grid item xs={12}>\n            <Grid container justify=\"flex-start\" spacing={spacing}>\n              {checkpoints.map((checkpoint) => (\n                <Grid key={checkpoint.cp_id} item className={classes.item}>\n                  <Paper className={classes.paper}>\n                    <CheckpointCard\n                      checkpoint={checkpoint}\n                      eventId={event.id}\n                    />\n                  </Paper>\n                </Grid>\n              ))}\n            </Grid>\n          </Grid>\n        </Grid>\n      )}\n\n      <Fab\n        className={classes.addCheckpointButton}\n        color=\"primary\"\n        aria-label=\"add\"\n        component={Link}\n        to={newCheckpointPath}\n      >\n        <AddIcon />\n      </Fab>\n      <MissingCheckpointsArea\n        scoredIds={checkpoints.map((ch) => ch.cp_id)}\n        max={event.checkpoint_count}\n      />\n      <Solution checkpoints={checkpoints} max={event.checkpoint_count} />\n    </Box>\n  );\n};\n\nexport default ScoreLauf;\n","import React from 'react';\nimport { useQuery } from '@apollo/client';\nimport { useParams, Link as RouterLink } from 'react-router-dom';\nimport ScoreLauf from '../ScoreLauf/ScoreLauf';\nimport { GET_EVENT } from '../../queries/event';\nimport {useInitialNavigation} from \"../../hooks/useInitialNavigation\";\nimport {Box, Breadcrumbs, Link, Typography} from \"@material-ui/core\";\nimport EventIcon from '@material-ui/icons/Event'\nimport {useBreadcrumbStyles} from \"../../hooks/useBreadcrumbStyles\";\nimport LoadingIndicator from \"../LoadingIndicator/LoadingIndicator\";\n\nconst EventPage = () => {\n  const { id } = useParams<{ id: string }>();\n\n  const classes = useBreadcrumbStyles()\n  const isInitialNavigation = useInitialNavigation()\n\n  const { loading, error, data } = useQuery(GET_EVENT, {\n    variables: { id: parseInt(id, 10) },\n    fetchPolicy: isInitialNavigation ? 'cache-and-network' : undefined,\n    nextFetchPolicy: isInitialNavigation ? 'cache-first' : undefined\n  });\n  const event = data?.event;\n\n  if (loading && !data) {\n    return <p>Loading...</p>;\n  }\n\n  return (\n    <div>\n      <Box px={1} py={2}>\n        <Breadcrumbs aria-label=\"breadcrumb\">\n          <Link color=\"inherit\" component={RouterLink} to='/' className={classes.link}>\n            <EventIcon className={classes.icon} />\n            Events\n          </Link>\n          <Typography color=\"textPrimary\">{event.name}</Typography>\n        </Breadcrumbs>\n      </Box>\n\n      <LoadingIndicator active={loading} />\n\n      {error && <p>Error :(</p>}\n\n      <ScoreLauf\n        event={event}\n        newCheckpointPath={`/events/${event.id}/add-checkpoint`}\n      />\n    </div>\n  );\n};\n\nexport default EventPage;\n","import otsu from 'otsu';\nvar getColorIndicesForCoord = function (x, y, width) {\n    var red = y * (width * 4) + x * 4;\n    return [red, red + 1, red + 2, red + 3];\n};\nvar posToIndex = function (x, y, width) {\n    return width * x + y;\n};\nexport function prepareImage(ctx) {\n    var _a = ctx.canvas, width = _a.width, height = _a.height;\n    var imageData = ctx.getImageData(0, 0, width, height);\n    var data = imageData.data;\n    var intensity = [];\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            var _b = getColorIndicesForCoord(x, y, width), rIndex = _b[0], gIndex = _b[1], bIndex = _b[2];\n            var r = data[rIndex];\n            var g = data[gIndex];\n            var b = data[bIndex];\n            var grey = Math.ceil(r + g + b) / 3;\n            intensity.push(grey);\n        }\n    }\n    var t = otsu(intensity);\n    var thresholded = intensity.map(function (e) { return (e > t); });\n    for (var x = 0; x < width; x++) {\n        for (var y = 0; y < height; y++) {\n            var index = posToIndex(x, y, height);\n            var _c = getColorIndicesForCoord(x, y, width), rIndex = _c[0], gIndex = _c[1], bIndex = _c[2], aIndex = _c[3];\n            if (thresholded[index]) {\n                data[rIndex] = 255;\n                data[gIndex] = 255;\n                data[bIndex] = 255;\n                data[aIndex] = 255;\n            }\n            else {\n                data[rIndex] = 0;\n                data[gIndex] = 0;\n                data[bIndex] = 0;\n                data[aIndex] = 255;\n            }\n        }\n    }\n    ctx.putImageData(imageData, 0, 0);\n}\n//# sourceMappingURL=prepareImage.js.map","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport * as React from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { prepareImage } from \"./prepareImage\";\nimport { scan, buildWorker } from \"./scan\";\nimport { detectHarpus } from \"./detectHarpus\";\nvar Scanner = function (_a) {\n    var onRead = _a.onRead;\n    var workerRef = useRef();\n    var canvasRef = useRef();\n    var videoRef = useRef();\n    var _b = useState(null), stream = _b[0], setStream = _b[1];\n    if (!canvasRef.current) {\n        canvasRef.current = document.createElement('canvas');\n    }\n    useEffect(function () {\n        buildWorker().then(function (w) { return workerRef.current = w; });\n        return function () {\n            workerRef.current && workerRef.current.terminate();\n        };\n    }, [workerRef]);\n    useEffect(function () {\n        var ignored = false;\n        var cleanUp = function () {\n            ignored = true;\n            if (stream) {\n                stream.getTracks().forEach(function (track) {\n                    track.stop();\n                });\n            }\n        };\n        if (stream) {\n            return cleanUp;\n        }\n        var video = videoRef.current;\n        function handleSuccess(stream) {\n            if (ignored) {\n                return;\n            }\n            setStream(stream);\n            video.srcObject = stream;\n        }\n        function handleError(error) {\n            if (ignored) {\n                return;\n            }\n            console.log('navigator.MediaDevices.getUserMedia error: ', error);\n        }\n        var constraints = navigator.mediaDevices.getSupportedConstraints();\n        navigator.mediaDevices.getUserMedia({\n            audio: false,\n            video: __assign({ width: { exact: 320 }, height: { exact: 240 } }, (constraints.facingMode ? { facingMode: 'environment' } : {}))\n        }).then(handleSuccess).catch(handleError);\n        return cleanUp;\n    }, [stream, videoRef]);\n    useEffect(function () {\n        var ref = setInterval(function () { return __awaiter(void 0, void 0, void 0, function () {\n            var canvas, video, ctx, text, point;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        canvas = canvasRef.current;\n                        video = videoRef.current;\n                        if (video.videoWidth === 0 || video.videoHeight === 0) {\n                            return [2];\n                        }\n                        canvas.width = video.videoWidth;\n                        canvas.height = video.videoHeight;\n                        ctx = canvas.getContext('2d');\n                        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n                        prepareImage(ctx);\n                        if (!workerRef.current) {\n                            return [2];\n                        }\n                        return [4, scan(workerRef.current, canvas.toDataURL())];\n                    case 1:\n                        text = _a.sent();\n                        point = detectHarpus(text);\n                        if (point) {\n                            onRead(point);\n                        }\n                        return [2];\n                }\n            });\n        }); }, 1000);\n        return function () {\n            clearInterval(ref);\n        };\n    }, [canvasRef, videoRef]);\n    return (React.createElement(\"div\", { style: { width: 300, height: 225, overflow: 'hidden' } },\n        React.createElement(\"video\", { playsInline: true, autoPlay: true, ref: videoRef, style: { width: '100%', height: 'calc(var(--width) * 0.75)' } })));\n};\nexport default Scanner;\n//# sourceMappingURL=Scanner.js.map","export function detectHarpus(text) {\n    var results = text.match(/([0-9]{1,2})\\s+(.{3})/);\n    if (!results) {\n        return null;\n    }\n    return { id: parseInt(results[1], 10), code: results[2] };\n}\n//# sourceMappingURL=detectHarpus.js.map","import React, { useState } from 'react';\nimport { Form, Field } from 'react-final-form';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport { Box, Button, TextField } from '@material-ui/core';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { FORM_ERROR } from 'final-form';\nimport { Scanner } from '@woodtime/scanner';\nimport { CREATE_CHECKPOINT } from '../../queries';\nimport { useMutation } from '@apollo/client';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    margin: {\n      margin: theme.spacing(1),\n    },\n  })\n);\n\ninterface Values {\n  eventId: number;\n  cpId: number;\n  cpCode?: string;\n  skipped?: boolean;\n  skipReason?: string;\n}\n\ninterface ScannerRead {\n  id: number;\n  code: string;\n}\n\nconst AddCheckpointPage = () => {\n  const [scanning, setScanning] = useState(false);\n  const [scannerRead, setScannerRead] = useState<ScannerRead | null>(null);\n  const { id: eventId } = useParams<{ id: string }>();\n\n  const history = useHistory();\n\n  const [createCheckpoint, { loading: creationLoading, error: creationError }] =\n    useMutation<any, Values>(CREATE_CHECKPOINT, {\n      refetchQueries: ['getEvent'],\n      awaitRefetchQueries: true,\n      onCompleted: (data) => {\n        history.push(`/events/${data.createCheckpoint.checkpoint.event_id}`);\n      },\n    });\n\n  const handleCheckpointSubmit = (checkpoint: any) => {\n    try {\n      return createCheckpoint({\n        variables: {\n          eventId: parseInt(eventId, 10),\n          cpId: parseInt(checkpoint.cpId, 10),\n          cpCode: checkpoint.cpCode,\n          skipped: checkpoint.skipped,\n          skipReason: checkpoint.skipReason,\n        },\n      });\n    } catch (err) {\n      if (!err) {\n        return {\n          [FORM_ERROR]: 'Something went wrong',\n        };\n      }\n\n      if (err.message && err.message.startsWith('Checkpoint')) {\n        return {\n          id: 'Id already taken',\n        };\n      }\n\n      return {\n        [FORM_ERROR]: err.message || err,\n      };\n    }\n  };\n\n  const classes = useStyles();\n\n  if (creationLoading) {\n    return <p>Loading...</p>;\n  }\n\n  if (creationError) {\n    return <p>Error :(</p>;\n  }\n\n  return (\n    <Form<Values>\n      onSubmit={handleCheckpointSubmit}\n      initialValues={{ skipped: false }}\n      render={({ values, submitError, handleSubmit }) => {\n        if (values.skipped) {\n          delete values.cpCode;\n        }\n\n        return (\n          <form onSubmit={handleSubmit}>\n            {submitError && (\n              <div className=\"error\">{submitError}</div> // not showing\n            )}\n            <Field\n              name=\"cpId\"\n              render={({ input, meta }) => (\n                <div className={classes.margin}>\n                  <TextField\n                    {...input}\n                    label=\"Id\"\n                    required\n                    autoComplete=\"off\"\n                  />\n                  {meta.touched && (meta.error || meta.submitError) && (\n                    <span>{meta.error || meta.submitError}</span>\n                  )}\n                </div>\n              )}\n            />\n\n            <Field\n              name=\"cpCode\"\n              render={({ input, meta }) => (\n                <div className={classes.margin}>\n                  <TextField\n                    {...input}\n                    label=\"Code\"\n                    required={!values.skipped}\n                    disabled={values.skipped}\n                    autoComplete=\"off\"\n                  />\n                  {meta.touched && (meta.error || meta.submitError) && (\n                    <span>{meta.error || meta.submitError}</span>\n                  )}\n                </div>\n              )}\n            />\n\n            <Field\n              name=\"skipped\"\n              type=\"checkbox\"\n              render={({ input, meta }) => (\n                <Box display=\"flex\" alignItems=\"center\" ml={1}>\n                  <FormControlLabel\n                    control={\n                      <Checkbox\n                        {...input}\n                        checked={input.value}\n                        name=\"skipped\"\n                        color=\"primary\"\n                      />\n                    }\n                    label=\"Skip\"\n                  />\n                </Box>\n              )}\n            />\n\n            <div\n              style={{\n                marginTop: 16,\n                marginBottom: 16,\n                width: 300,\n                height: 225,\n              }}\n            >\n              {scanning ? (\n                <div style={{ position: 'relative' }}>\n                  <Scanner\n                    onRead={(point) => {\n                      setScannerRead(point);\n                    }}\n                  />\n\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={() => setScanning(false)}\n                    style={{ position: 'absolute', bottom: 0, right: 0 }}\n                  >\n                    Cancel\n                  </Button>\n                </div>\n              ) : (\n                <div\n                  style={{\n                    width: 300,\n                    height: 225,\n                    background: 'grey',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                  }}\n                >\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={() => setScanning(true)}\n                  >\n                    Scan\n                  </Button>\n                </div>\n              )}\n            </div>\n\n            {scannerRead && (\n              <div>\n                {scannerRead.id} - {scannerRead.code}\n              </div>\n            )}\n\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n              Submit\n            </Button>\n          </form>\n        );\n      }}\n    />\n  );\n};\n\nexport default AddCheckpointPage;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADB/VeXAAACH0lEQVRIDbWWPU8bQRCGZ/bsJHKDROIiJh0dFESyRRKlpggWWPkNFhUSLSWiRK6pIn6DfSCSInWUgBwpFEnnKkCBAxIUFnDcDvOusGXZTrJHLltYt3czz+zHzDtm+sM4ffH+WRxfV4i4TCSTJFRw5kzH+q6l73aD4EH4eG/+8HcYHvWh/TosyKWsC/NbFtkxFIQSmB+SyylY0Z1OgSmatjEtqs2C2tT5Ea/lP1Xc937mUIB2KVy0RFss9C5DuY3xr3Pn/Q6Dz2fFj2M31FkVpiVDVM03K9uDNr35SbGxclJq/GzPhqXeS88H+MAXjH6X3g6wciHZNNng5ZPPC0f9Rr7Pv17tTNgo/sLEy92duAA4c3tFB8bQm/x+pekLHGWHnVhLH8xDmsGd6LFpLuiF4sz/FQ4WGGCBiTkjFW/i6FtWcpN/u1A4+AxcfMSdVibIPjfIc6RiWnAsACwwwdYj4jLy3GdlSWxMQJquYGuFooiSOPvYCmW/g21Q/t0K9XH0tXFMZbss8nVKYsfRhSsBQypc0JYkzl62UeYp2LjkFsd2ysspgRHEEGxc8q6lWCU53QGlBdtAzyG5KI60QoAFJtgGzQJ6DslNKwBYYILtsgjNAnp+H5keXBQYYIGJby7AnepVxUodkjvo5DuHLxgKrXa7mwsAgNNvoRr0/D47cTKtvlq4tW4vALfXcDDBSLtlDgVwQf5n03fbuPtJ42/LLeEvKdWYGdgZAAAAAElFTkSuQmCC\"","import React, { useRef, useEffect, useState } from 'react'\nimport * as L from 'leaflet'\n\nimport oval from '../../assets/oval.png'\n\nconst checkpointIcon = L.icon({\n  iconUrl: oval,\n  shadowUrl: oval,\n\n  iconSize:     [24, 24], // size of the icon\n  shadowSize:   [24, 24], // size of the shadow\n  iconAnchor:   [12, 12], // point of the icon which will correspond to marker's location\n  shadowAnchor: [12, 12],  // the same for the shadow\n  popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor\n})\n\ninterface Coords {\n  lat: number\n  lng: number\n}\n\ninterface Props {\n  startPoint: [number, number] | null\n  initialPoint: [number, number]\n  range: number\n  checkpoints?: Coords[]\n  onDrag: (coords: Coords) => void\n  onClick: (coords: Coords) => void\n  onChange: (points: Coords[]) => void\n}\n\nconst Map = ({ initialPoint, startPoint, range, checkpoints, onDrag, onClick, onChange }: Props) => {\n  const mapRef = useRef<L.Map | null>(null)\n  const circleRef = useRef<L.Circle | null>(null)\n  const [dragging, setDragging] = useState(false)\n\n  useEffect(() => {\n    const map = L.map('mapid').setView(initialPoint, 13)\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors,',\n      maxZoom: 18,\n      id: 'osm/streets',\n      tileSize: 512,\n      zoomOffset: -1\n    }).addTo(map)\n\n    mapRef.current = map\n\n    return () => {\n      map.off()\n      map.remove()\n    }\n  }, [initialPoint])\n\n  useEffect(() => {\n    const map = mapRef.current\n\n    if (!map) {\n      return\n    }\n\n    const callback = (e: L.LeafletEvent) => {\n      // @ts-ignore\n      const position = e.latlng\n      onClick(position)\n    }\n\n    map.on('click', callback)\n\n    return () => {\n      map.off('click', callback)\n    }\n  }, [onClick, mapRef])\n\n  useEffect(() => {\n    const map = mapRef.current\n\n    if (!startPoint || !map) {\n      return\n    }\n\n    const circle = L.circle(startPoint, {\n      color: 'red',\n      opacity: 0.5,\n      fillColor: '#fff',\n      fillOpacity: 0.2,\n      radius: 500\n    }).addTo(map)\n\n    const marker = L.marker(startPoint, { draggable: true })\n\n    marker.on('dragstart', event => {\n      setDragging(true)\n    })\n\n    marker.on('dragend', event => {\n      setDragging(false)\n    })\n\n    marker.on('dragend', event => {\n      const m = event.target;\n      const position = m.getLatLng();\n\n      onDrag(position)\n    })\n\n    marker.on('drag', event => {\n      const m = event.target;\n      const position = m.getLatLng()\n\n      circle.setLatLng(position)\n    })\n\n    map.addLayer(marker)\n\n    circleRef.current = circle\n\n    return () => {\n      circleRef.current = null\n      map.removeLayer(marker)\n      map.removeLayer(circle)\n    }\n  }, [startPoint, mapRef, onDrag])\n\n  useEffect(() => {\n    if (!circleRef.current) {\n      return\n    }\n\n    circleRef.current.setRadius(range)\n  }, [range, circleRef])\n\n  // useEffect(() => {\n  //   if (checkpoints) {\n  //     console.log(checkpoints)\n  //     onChange(checkpoints)\n  //   }\n  // }, [checkpoints, onChange])\n\n  useEffect(() => {\n    if (!mapRef.current || !circleRef.current || !checkpoints || dragging) {\n      return\n    }\n\n    const markers = checkpoints?.map((point, index) => {\n      return L.marker([point.lat, point.lng], { draggable: true, icon: checkpointIcon }).bindTooltip(`${index + 1}`, { permanent: true, interactive: false, className: 'checkpoint-label', direction: 'right' })\n    }) ?? []\n\n    markers.forEach(marker => mapRef.current?.addLayer(marker))\n    markers.forEach(marker => {\n      marker.on('dragend', (e) => {\n        const newCheckPoints = markers.map(m => m.getLatLng())\n        onChange(newCheckPoints)\n      })\n    })\n\n    return () => {\n      markers.forEach(marker => mapRef.current?.removeLayer(marker))\n    }\n  }, [checkpoints, circleRef, mapRef, dragging, onChange])\n\n  return (\n    <div id='mapid' style={{ height: '100%' }} />\n  )\n}\n\nexport default Map\n","import gql from 'graphql-tag';\n\nexport const GET_VIRTUAL_POINTS = gql`\n  query getVirtualPoints ($input: PointsNearbyInput!) {\n    pointsNearby(input: $input) {\n      points {\n        lat\n        lng\n      }\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const CREATE_VIRTUAL_CHALLENGE = gql`\n  mutation CreateVirtualChallenge(\n    $input: CreateVirtualChallengeInput!\n  ) {\n    createVirtualChallenge(\n      input: $input\n    ) {\n      success\n      virtualChallenge {\n        id\n        name\n        checkpoints {\n          points {\n            lat\n            lng\n          }\n          totalCount\n        }\n      }\n    }\n  }\n`;\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport { Button, Slider } from '@material-ui/core'\nimport { useLazyQuery, useMutation } from '@apollo/client'\n\nimport Map from './Map'\nimport {GET_VIRTUAL_POINTS} from '../../queries/getVirtualPoints'\nimport {CREATE_VIRTUAL_CHALLENGE} from \"../../queries/createVirtualChallenge\";\n\ninterface Coords {\n  lat: number\n  lng: number\n}\n\nconst AddVirtualChallenge = () => {\n  const [points, setPoints] = useState<Coords[]>([])\n  const [getPoints, { loading, data }] = useLazyQuery(GET_VIRTUAL_POINTS, {\n    fetchPolicy: 'no-cache',\n    notifyOnNetworkStatusChange: true\n  })\n\n  const [create] = useMutation(CREATE_VIRTUAL_CHALLENGE)\n\n  const [startPoint, setStartPoint] = useState<[number, number] | null>(null)\n  const initialPoint: [number, number] = useMemo(() => [54.372158, 18.638306], [])\n  const [range, setRange] = useState(500)\n\n\n  const handleChange = (event: unknown, newValue: number | number[]) => {\n    setRange(Array.isArray(newValue) ? newValue[0] : newValue)\n  }\n\n  const handlePositionDrag = useCallback((coords) => {\n    setStartPoint([coords.lat, coords.lng])\n  }, [setStartPoint])\n\n  const hasPoint = startPoint !== null\n\n  const handleMapClick = useCallback((coords) => {\n    if (hasPoint) {\n      return\n    }\n\n    setStartPoint([coords.lat, coords.lng])\n  }, [hasPoint, setStartPoint])\n\n  const handlePointsChange = useCallback((points: Coords[]) => {\n    setPoints(points)\n  }, [setPoints])\n\n  const handleCreate = useCallback(() => {\n    create({\n      variables: {\n        input: {\n          name: 'Test',\n          checkpoints: points.map(point => ({ lat: point.lat.toString(), lng: point.lng.toString()}))\n        }\n      }\n    })\n  }, [points, create])\n\n  useEffect(() => {\n    if (!startPoint) {\n      return\n    }\n\n    getPoints({\n      variables: {\n        input: {\n          start: {\n            lat: startPoint[0].toString(),\n            lng: startPoint[1].toString()\n          },\n          radius: range,\n          count: 12\n        }\n      }\n    })\n  }, [getPoints, range, startPoint])\n\n  useEffect(() => {\n    if (!loading && data) {\n      setPoints(data.pointsNearby.points.map(({ lat, lng }: {lat: string, lng: string }) => ({\n        lat: parseFloat(lat),\n        lng: parseFloat(lng)\n      })))\n    } else {\n      setPoints([])\n    }\n  }, [loading, data])\n\n  return (\n    <div>\n      <div style={{ height: 200 }}>\n        <Slider value={range} onChange={handleChange} min={100} max={2000} aria-labelledby=\"continuous-slider\" />\n\n        <br />\n        <Button onClick={handleCreate}>Create</Button>\n      </div>\n      <div style={{ position: 'fixed', bottom: 12, left: 12, right: 12, top: 300 }}>\n        <Map\n          initialPoint={initialPoint}\n          startPoint={startPoint}\n          range={range}\n          checkpoints={points}\n          onDrag={handlePositionDrag}\n          onClick={handleMapClick}\n          onChange={handlePointsChange}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default AddVirtualChallenge\n","import gql from 'graphql-tag';\n\nexport const GET_VIRTUAL_CHALLENGES = gql`\n  query getVirtualChallenges {\n    virtualChallenges {\n      nodes {\n        id\n        name\n        createdAt: created_at\n        checkpoints {\n          totalCount\n          points {\n            lat\n            lng\n          }\n        }\n      }\n    }\n  }\n`;\n","import { useQuery } from '@apollo/client';\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Typography from '@material-ui/core/Typography';\nimport PublicIcon from '@material-ui/icons/Public';\n\nimport React from 'react'\nimport {GET_VIRTUAL_CHALLENGES} from \"../../queries/getVirtualChallenges\";\nimport LoadingIndicator from \"../LoadingIndicator/LoadingIndicator\";\nimport {useBreadcrumbStyles} from \"../../hooks/useBreadcrumbStyles\";\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport { Link } from 'react-router-dom';\nimport ListItemText from '@material-ui/core/ListItemText/ListItemText';\nimport { format } from 'date-fns';\nimport {useInitialNavigation} from \"../../hooks/useInitialNavigation\";\n\nconst VirtualChallengeList = () => {\n  const isInitialNavigation = useInitialNavigation();\n\n  const { data, loading } = useQuery(GET_VIRTUAL_CHALLENGES, {\n    fetchPolicy: isInitialNavigation ? 'cache-and-network' : undefined,\n    nextFetchPolicy: isInitialNavigation ? 'cache-first' : undefined,\n  })\n\n  const breadcrumbClasses = useBreadcrumbStyles();\n\n  if (!data) {\n    return (<div>Loading</div>)\n  }\n\n  return (\n    <div>\n      <Box px={1} py={2}>\n        <Breadcrumbs aria-label=\"breadcrumb\">\n          <Typography color=\"textPrimary\" className={breadcrumbClasses.link}>\n            <PublicIcon className={breadcrumbClasses.icon} />\n            Virtual Challenges\n          </Typography>\n        </Breadcrumbs>\n      </Box>\n\n      <LoadingIndicator active={loading} />\n\n      <List>\n        {data.virtualChallenges.nodes.map((challenge: any) => (\n          <ListItem button component={Link} to={`/virtual-challenges/${challenge.id}`}>\n            <ListItemText\n              primary={challenge.name}\n              secondary={format(new Date(challenge.createdAt), 'dd/MM/yyyy')}\n            />\n          </ListItem>\n        ))}\n      </List>\n\n    </div>\n  )\n}\n\nexport default VirtualChallengeList\n","import gql from 'graphql-tag';\n\nexport const GET_VIRTUAL_CHALLENGE = gql`\n  query getVirtualChallenge($id: Int!) {\n    virtualChallenge(id: $id) {\n      id\n      name\n      createdAt: created_at\n      checkpoints {\n        totalCount\n        points {\n          lat\n          lng\n        }\n      }\n    }\n  }\n`;\n","import gql from 'graphql-tag';\n\nexport const ENROLL_VIRTUAL_CHALLENGE = gql`\n  mutation EnrollVirtualChallenge($id: Int!) {\n    enrollVirtualChallenge(id: $id) {\n      success\n      event {\n        id\n        name\n        type\n        checkpoint_count\n        created_at\n        updated_at\n      }\n    }\n  }\n`;\n","import { useQuery, useMutation } from '@apollo/client';\nimport React from 'react'\nimport {useHistory, useParams } from \"react-router-dom\"\nimport {GET_VIRTUAL_CHALLENGE} from \"../../queries/getVirtualChallenge\";\nimport {useInitialNavigation} from \"../../hooks/useInitialNavigation\";\nimport { Link as RouterLink } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport PublicIcon from '@material-ui/icons/Public';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\nimport {useBreadcrumbStyles} from \"../../hooks/useBreadcrumbStyles\";\nimport Button from '@material-ui/core/Button';\nimport {ENROLL_VIRTUAL_CHALLENGE} from \"../../queries/enrollVirtualChallenge\";\nimport {GET_EVENTS} from \"../../queries\";\n\nconst VirtualChallenge = () => {\n  const isInitialNavigation = useInitialNavigation();\n\n  const breadcrumbClasses = useBreadcrumbStyles()\n  const history = useHistory();\n\n  const { id } = useParams<{ id: string }>()\n  const { data } = useQuery(GET_VIRTUAL_CHALLENGE, {\n    fetchPolicy: isInitialNavigation ? 'cache-and-network' : undefined,\n    nextFetchPolicy: isInitialNavigation ? 'cache-first' : undefined,\n    variables: {\n      id: parseInt(id, 10)\n    }\n  })\n\n  const [enroll] = useMutation(ENROLL_VIRTUAL_CHALLENGE, {\n    refetchQueries: [{ query: GET_EVENTS }],\n    awaitRefetchQueries: true,\n    onCompleted: (data) => {\n      history.push(`/events/${data.enrollVirtualChallenge.event.id}`);\n    },\n    variables: {\n      id: parseInt(id, 10)\n    }\n  })\n\n  const virtualChallenge = data?.virtualChallenge\n\n  if (!virtualChallenge) {\n    return <div>NOT FOUND</div>\n  }\n\n  return (\n    <div>\n      <Box px={1} py={2}>\n        <Breadcrumbs aria-label=\"breadcrumb\">\n          <Link color=\"inherit\" component={RouterLink} to='/virtual-challenges' className={breadcrumbClasses.link}>\n            <PublicIcon className={breadcrumbClasses.icon} />\n            Virtual Challenges\n          </Link>\n          <Typography color=\"textPrimary\">{virtualChallenge.name}</Typography>\n        </Breadcrumbs>\n      </Box>\n\n      <Button onClick={() => enroll()}>Join</Button>\n    </div>\n  )\n}\n\nexport default VirtualChallenge\n","import { createContext } from \"react\";\n\nexport type PwaUpdateOnSuccessCallback =  () => void\nexport type PwaUpdateOnUpdateCallback = (reg: ServiceWorkerRegistration) => void\n\nexport interface PwaUpdater {\n  onSuccess: (cb: PwaUpdateOnSuccessCallback) => void\n  offSuccess: (cb: PwaUpdateOnSuccessCallback) => void\n  onUpdate: (cb: PwaUpdateOnUpdateCallback) => void\n  offUpdate: (cb: PwaUpdateOnUpdateCallback) => void\n}\n\nconst PwaUpdaterContext = createContext<PwaUpdater|null>(null)\n\nexport default PwaUpdaterContext\n","import React, {useContext, useEffect, useState} from 'react'\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport PwaUpdaterContext from \"../PwaUpdaterContext/PwaUpdaterContext\";\n\nconst PwaUpdateNotification = () => {\n  const updater = useContext(PwaUpdaterContext)\n  const [loading, setLoading] = useState(false)\n  const [registration, setRegistration] = useState<ServiceWorkerRegistration|null>(null)\n\n  useEffect(() => {\n    if (!updater) {\n      return\n    }\n\n    const handleUpdate = (reg: ServiceWorkerRegistration) => {\n      setRegistration(reg)\n    }\n\n    updater.onUpdate(handleUpdate)\n\n    return () => {\n      updater.offUpdate(handleUpdate)\n    }\n  }, [updater])\n\n\n  const handleClose = () => {\n    setRegistration(null)\n  }\n\n  const handleReload = () => {\n    if (!registration) {\n      return\n    }\n\n    setLoading(true)\n\n    const registrationWaiting = registration.waiting;\n    if (registrationWaiting) {\n      registrationWaiting.postMessage({ type: 'SKIP_WAITING' });\n      registrationWaiting.addEventListener('statechange', (e) => {\n        const target = e.target ? e.target as ServiceWorker : null\n        if (target?.state === 'activated') {\n          window.location.reload()\n        }\n      });\n    }\n  }\n\n  return (\n    <Snackbar\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      open={Boolean(registration)}\n      onClose={handleClose}\n      message=\"A new version of the app is available!\"\n      action={\n        <React.Fragment>\n          <Button color=\"secondary\" size=\"small\" onClick={handleReload} disabled={loading}>\n            RELOAD\n          </Button>\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\n            <CloseIcon fontSize=\"small\" />\n          </IconButton>\n        </React.Fragment>\n      }\n    />\n  )\n}\n\nexport default PwaUpdateNotification\n","import React, {useEffect, useState} from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport {AppBar, Toolbar, Typography, Link, CircularProgress, IconButton} from '@material-ui/core';\nimport PublicIcon from '@material-ui/icons/Public';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link as RouterLink,\n} from 'react-router-dom';\nimport {\n  ApolloClient,\n  ApolloProvider,\n  createHttpLink,\n  InMemoryCache,\n  NormalizedCacheObject,\n} from '@apollo/client';\n\nimport EventList from './components/EventList/EventList';\nimport AddEvent from './components/AddEvent/AddEvent';\nimport EventPage from './components/EventPage/EventPage';\nimport AddCheckpointPage from './components/AddCheckpointPage/AddCheckpointPage';\nimport AddVirtualChallenge from './components/AddVirtualChallenge/AddVirtualChallenge';\nimport VirtualChallengeList from './components/VirtualChallengeList/VirtualChallengeList';\nimport VirtualChallenge from './components/VirtualChallenge/VirtualChallenge';\nimport PwaUpdateNotification from './components/PwaUpdateNofication/PwaUpdateNotification';\nimport {LocalStorageWrapper, persistCache} from \"apollo3-cache-persist\"\nimport InitialNavigationDetector from \"./components/InitialNavigationDetector/InitialNavigationDetector\";\n\nconst getLink = () => {\n  return createHttpLink({\n    uri:\n      process.env.REACT_APP_GRAPHQL_ENDPOINT ||\n      'http://localhost:8080/woodtime',\n  });\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n    loaderWrapper: {\n      alignItems: 'center',\n      width: '100%',\n      height: '100%',\n      justifyContent: 'center',\n      display: 'flex'\n    }\n  })\n);\n\nfunction App() {\n  const [client, setClient] = useState<ApolloClient<NormalizedCacheObject> | null>(null)\n  const classes = useStyles()\n\n  useEffect(() => {\n    async function init() {\n      const cache = new InMemoryCache()\n\n      await persistCache({\n        cache,\n        storage: new LocalStorageWrapper(window.localStorage),\n      })\n      setClient(\n        new ApolloClient({\n          cache,\n          link: getLink()\n        }),\n      );\n    }\n\n    init().catch(console.error);\n  }, [setClient])\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <PwaUpdateNotification />\n\n      <InitialNavigationDetector>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" className={classes.title}>\n              <Link component={RouterLink} to=\"/\" color=\"inherit\">\n                Woodtime\n              </Link>\n            </Typography>\n\n            <IconButton component={RouterLink} to=\"/virtual-challenges\" color=\"inherit\" aria-label='Browse virtual challenges'>\n              <PublicIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n\n        {client ? (\n          <ApolloProvider client={client}>\n            <Switch>\n              <Route path=\"/\" exact>\n                <EventList />\n              </Route>\n              <Route path=\"/events/new\" exact>\n                <EventList />\n                <AddEvent />\n              </Route>\n              <Route path=\"/events/:id\" exact>\n                <EventPage />\n              </Route>\n              <Route path=\"/events/:id/add-checkpoint\" exact>\n                <AddCheckpointPage />\n              </Route>\n              <Route path=\"/virtual-challenges\" exact>\n                <VirtualChallengeList />\n              </Route>\n              <Route path=\"/virtual-challenges/new\" exact>\n                <AddVirtualChallenge />\n              </Route>\n              <Route path=\"/virtual-challenges/:id\" exact>\n                <VirtualChallenge />\n              </Route>\n            </Switch>\n          </ApolloProvider>\n        ) : (\n          <div className={classes.loaderWrapper}>\n            <CircularProgress />\n          </div>\n        )}\n      </InitialNavigationDetector>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, {ReactNode} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nimport PwaUpdaterContext, { PwaUpdater, PwaUpdateOnSuccessCallback, PwaUpdateOnUpdateCallback } from './components/PwaUpdaterContext/PwaUpdaterContext'\n\nconst onSuccessCallbacks: PwaUpdateOnSuccessCallback[] = []\nconst onUpdateCallbacks: PwaUpdateOnUpdateCallback[] = []\n\nconst UpdaterProvider = ({ children }: { children: ReactNode }) => {\n  const value: PwaUpdater = {\n    onSuccess: (cb) => onSuccessCallbacks.push(cb),\n    offSuccess: (cb) => onSuccessCallbacks.filter(fn => fn !== cb),\n    onUpdate: (cb) => onUpdateCallbacks.push(cb),\n    offUpdate: (cb) => onUpdateCallbacks.filter(fn => fn !== cb)\n  }\n\n  return (\n    <PwaUpdaterContext.Provider value={value}>\n      {children}\n    </PwaUpdaterContext.Provider>\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <UpdaterProvider>\n      <App />\n    </UpdaterProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register({\n  onUpdate: reg => {\n    onUpdateCallbacks.forEach(cb => cb(reg))\n  },\n  onSuccess: () => {\n    onSuccessCallbacks.forEach(cb => cb())\n  }\n});\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}